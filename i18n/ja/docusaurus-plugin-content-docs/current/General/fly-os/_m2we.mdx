import WIN32 from '@site/i18n/ja/docusaurus-plugin-content-docs/current/General/fly-os/_win32.mdx';

# USB経由でM2WEにシステムをインストールする方法

### 準備作業

    * `Win32DiskImager`ソフトウェアのインストールをお願いします
    <Button variant="contained" disableElevation href="https://mellow.klipper.cn/docs/ResDownload/auxiliary_software/">フォーマットツール</Button>
    * システムを解凍し、解凍後のファイル名の拡張子は`.img`になります
    * `balenaEtcher`や`Raspberry Pi`を使用したシステムの焼込みは推奨しません
    * M2WEにデータがある場合はバックアップをお願いします
       * [M2WE BOOTドライバーのダウンロード](/docs/ResDownload/auxiliary_software/ "クリックしてジャンプ")

### ドライバーのインストール

    * `Zadig`ソフトウェアを開く
    * 最初の`Zadig`はインストールせずそのまま実行可能ですが、他の二つはインストールが必要です。インストールの際は全て「次へ」または「Next」を選択してください
    * `Zadig`を開き、メニューの`Options`で「すべてのデバイスをリストする」にチェックを入れる

    <ImageView image={require('@site/docs/General/fly-os/img/zadig.webp').default} size="80%" align="left" />

:::tip
キーを押した状態でデバイスをコンピュータに接続してください
:::

    * M2WEのインストールが完了しており、BOOTボタンを押しながら両頭USBをコンピュータに接続する

    <ImageView image={require('@site/docs/General/fly-os/img/usb-boot.webp').default} size="80%" align="center" />
            <Tabs>
                <TabItem value="c8" label="FLY-C8" default>
                    * FLY-C8 ポート

                    <ImageView image={require('@site/docs/General/fly-os/img/c8-boot.webp').default} size="80%" align="center" />
                </TabItem>
                <TabItem value="piv2" label="FLY-Pi v2" default>
                    * FLY-Pi v2 ポート

                    <ImageView image={require('@site/docs/General/fly-os/img/piv2-boot.webp').default} size="80%" align="center" />
                </TabItem>
                <TabItem value="piv1" label="FLY-Pi(π)" default>
                    * FLY-Pi ポート

                    <ImageView image={require('@site/docs/General/fly-os/img/pi-boot.webp').default} size="80%" align="center" />
                </TabItem>
                <TabItem value="gemini" label="FLY-Gemini" default>
                    * FLY-Gemini ポート

                    <ImageView image={require('@site/docs/General/fly-os/img/pi-boot.webp').default} size="80%" align="center" />

                </TabItem>
            </Tabs>

    * zadigを開く

    <ImageView image={require('@site/docs/General/fly-os/img/zadig1.webp').default} size="80%" align="left" />

    * 問題がなければ、ここでzadigに`Unknown Device #x`または`USB Device(VID_1f3a_PID_efe8)`が追加されます。それを選択する

    <ImageView image={require('@site/docs/General/fly-os/img/zadig2.webp').default} size="80%" align="left" />

    * 選択したデバイスのUSB IDが図と同じであることを確認してください。異なっている場合、他のデバイスを選択してください
    * 上記の図の2番目は「WinUSB(vxxxxxxx)」を選択できれば問題ありません。バージョン番号は関係ありません
    * 「Install Driver」をクリックしてドライバーをインストールする

    <ImageView image={require('@site/docs/General/fly-os/img/zadig3.webp').default} size="80%" align="left" />

    * USBドライバーのインストールが成功しました（ドライバーは一度だけインストールすればOKです。再度焼込みを行う際にはインストールする必要はありません）
    * インストール済みのFLY-BOOTを開き、「デバイスのチェック」をクリックする
    * 前述の手順が正しく行われた場合、「利用可能なデバイスが見つかりました」というメッセージが表示されるはずです
    * 「BOOT」を起動すると正常であれば「BOOT」が成功に有効化された旨のメッセージが表示されます

### M2WEのフォーマット

    * `TFFormatter.exe`ソフトウェアを使用して「BOOT」ディスクをフォーマットする

    <ImageView image={require('@site/docs/General/fly-os/img/sdformatter.webp').default} size="80%" align="left" />

    * またはWindows標準のディスク管理でパーティションを削除し、削除後に新しいパーティションを作成してください
    * これでファイルエクスプローラーを開くと、14.5GBのUディスクが追加されます（16GB eMMCの表示サイズは14.5GBです）
    * この時点でWin32diskimagerを使ってシステムイメージを焼込むことができます。ドライブ選択はこの14.5GBのUディスクを選んでください



### M2WEへのシステム焼込み

<WIN32 />
