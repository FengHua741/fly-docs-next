import FALSH from '@site/i18n/ja/docusaurus-plugin-content-docs/current/General/fly-os/_falsh.mdx';

# USB経由でM2WEにブートローダーをインストールする方法

### 事前準備

### 事前準備

    * ソフトウェア`SDFormatter`と`Rufus`を先にインストールします
    <Button variant="contained" disableElevation component="a" rel="noopener" href="/docs/ResDownload/auxiliary_software/">フォーマットツール</Button>
    * [M2WE BOOTドライバー](/docs/ResDownload/auxiliary_software/ "クリックしてジャンプ")をダウンロードします
    * システムを解凍し、解凍後のファイル名の拡張子は`.img`となっています
    * `balenaEtcher`や`Raspberry Pi`を使用したシステム書き込みは推奨されません
    * M2WEまたはSDカードをM2SDに取り付け、その後M2SDをコンピューターのUSBポートに差します
    * M2WEにデータがある場合はバックアップしてください


### ドライバーのインストール

    * `Zadig`ソフトウェアを開きます
    * 最初の`Zadig`以外の2つはインストールが必要です。インストールの過程ではすべて「次へ」または「Next」をクリックしてください
    * `Zadig`を開き、メニューの`Options`から`List All Devices`を選択します

    <ImageView image={require('@site/docs/General/fly-os/img/zadig.webp').default} size="80%" align="left" />

:::tip
押している状態でデバイスをコンピューターに接続することを確認してください
:::

    * M2WEが正常にインストールされ、BOOTボタンを押しながら両頭USBをコンピューターに接続します

    <ImageView image={require('@site/docs/General/fly-os/img/usb-boot.webp').default} size="80%" align="center" />
            <Tabs>
                <TabItem value="c8" label="FLY-C8" default>
                    * FLY-C8 ポート

                    <ImageView image={require('@site/docs/General/fly-os/img/c8-boot.webp').default} size="80%" align="center" />
                </TabItem>
                <TabItem value="piv2" label="FLY-Pi v2" default>
                    * FLY-Pi v2 ポート

                    <ImageView image={require('@site/docs/General/fly-os/img/piv2-boot.webp').default} size="80%" align="center" />
                </TabItem>
                <TabItem value="piv1" label="FLY-Pi(π)" default>
                    * FLY-Pi ポート

                    <ImageView image={require('@site/docs/General/fly-os/img/pi-boot.webp').default} size="80%" align="center" />
                </TabItem>
                <TabItem value="gemini" label="FLY-Gemini" default>
                    * FLY-Gemini ポート

                    <ImageView image={require('@site/docs/General/fly-os/img/pi-boot.webp').default} size="80%" align="center" />

                </TabItem>
            </Tabs>

    * zadigを起動します

    <ImageView image={require('@site/docs/General/fly-os/img/zadig1.webp').default} size="80%" align="left" />

    * 問題なければ、この時点でzadigに`Unknow Device #x`または`USB Device(VID_1f3a_PID_efe8)`が追加されます。それを選択します

    <ImageView image={require('@site/docs/General/fly-os/img/zadig2.webp').default} size="80%" align="left" />

    * デバイスを選択後、USB IDが上図と同じであるか確認してください。一致しない場合、他のデバイスを選んでください
    * 上図の2番目の箇所は必ず`WinUSB(vxxxxxxx)`を選択してください。バージョン番号は問題ありません
    * `Install Driver`をクリックしてドライバーをインストールします

    <ImageView image={require('@site/docs/General/fly-os/img/zadig3.webp').default} size="80%" align="left" />
:::tip
    * USBドライバーのインストールが成功しました。（ドライバーは一度だけインストールすればOKです。もし再度ブートローダーを書き込む場合、ドライバーを再インストールする必要はありません）
    * インストールされたFLY-BOOTを開き、「デバイスをチェック」をクリックします
    * 前の手順が正しく行われた場合、「利用可能なデバイスが見つかりました」というメッセージが表示されます
    * 「BOOT」をクリックして起動すると、正常であれば「BOOTが正常に有効化されました」というメッセージが表示されます
:::
### M2WEのフォーマット

    * `TFFormatter.exe`ソフトウェアを使用して`BOOT`ディスクをフォーマットします

    <ImageView image={require('@site/docs/General/fly-os/img/sdformatter.webp').default} size="80%" align="left" />

    * または、Windowsのディスク管理を使用してパーティションを削除し、削除後に新しいパーティションを作成します
    * 現在、ファイルエクスプローラーを開くと、14.5GBのUディスク（16GB eMMCの表示サイズは14.5GB）が追加されています
    * これにより、Win32DiskImagerを使用してシステムイメージを書き込むことができます。ドライブ選択はこの14.5GB Uディスクのドライブを選択してください



### M2WEへの書き込み

<FALSH />
