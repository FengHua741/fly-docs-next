---
sidebar_position: 12
sidebar_label: プラグインでLEDを制御
---


* 自動翻訳機能を使用してウェブページを開く

# LEDエフェクト

アドレス可能なLEDは、その柔軟性と比較的簡単な使用法のためにRGB LEDを次第に上回りつつあります。各個別の要素が非常に高速にフルスペクトルの色を表示できるため、さまざまな照明効果を作成することができます。



# ストリップの設定

設定ファイルでは、IOピンに接続された各ストリップまたはチェーンについて定義する必要があります。各ストリップのデータピン（および適用される場合のクロックピン）とチェーン内のLED数が定義されます。LEDエフェクトインスタンスは、異なる種類や色順序を持つ複数のストリップを同時に使用できますが、それぞれのストリップはまずその種類によって定義されなければなりません。

```cfg
[neopixel panel_ring]
pin:                     ar6
chain_count:             16
```

# エフェクトの設定

エフェクトは、より抽象的な意味では、ストリップが存在する「状態」です。エフェクトは1つのLEDから100個まで含めることができます。1つのエフェクトレイヤーか10個まであります。これはすべて任意であり拡張可能です。これにより、同時に動作させることが可能なレイヤー数とLED数の唯一の制限は、ホストOSが処理できる能力に依存します。初期テストでは、Raspberry Pi 4で24 FPSで最大100個のLEDと12のエフェクトレイヤーが同時に実行されました。

## 基本的なレイヤー定義

例示するプリンターには、前面パネルに配置された16個のLEDを備えた1つのNeopixelリングと、ホットエンド横の短いNeopixelLEDセグメントがあります。このセグメントは印刷を照らすために使用されます。

また、ベッドの下には5つのDotstarLEDがあります。ここで挙げられているピン番号は完全に作りものです。

```cfg
[neopixel panel_ring]
pin:                     ar6
chain_count:             16

[neopixel tool_lights]
pin:                     ar15
chain_count:             6

[dotstar bed_lights]
data_pin:                ar21
clock_pin                ar22
chain_count:             5
```

プリンターがオンラインになったときにリングが淡い青色になり、明るさが「息を吹き込む」ように変化することを望んでいます。

```cfg
[led_effect panel_idle]
autostart:              true
frame_rate:             24
leds:
    neopixel:panel_ring
layers:
    breathing  10 1 top (.5,.5,1)
```

これにより、`panel_idle`という名前のエフェクトが定義されました。

### エフェクトの制御
エフェクトはアクティブまたは非アクティブの状態にあります。非アクティブなエフェクトは、どの色データも出力しませんが、アクティブなエフェクトは、各LED上で合計された色データを返します。

#### エフェクトのアクティブ化と非アクティブ化
例示されるエフェクトは、GCodeコマンド`SET_LED_EFFECT EFFECT=panel_idle`を実行することでアクティブ化できます。現在のLED上で新しいエフェクトを使用しているエフェクトをすべて停止するには、`REPLACE`パラメータを1に設定します: `SET_LED_EFFECT EFFECT=panel_idle REPLACE=1`。この特定のエフェクトを再び非アクティブ化するには、コマンド`SET_LED_EFFECT EFFECT=panel_idle STOP=1`を実行します。すべてのエフェクトを非アクティブにするには、GCodeコマンド`STOP_LED_EFFECTS`を使用できます。特定のLEDのエフェクトのみを非アクティブにするには、LEDSパラメータを指定します: `STOP_LED_EFFECTS LEDS="neopixel:panel_ring"`。インデックスも指定できます（以下参照）: `STOP_LED_EFFECTS LEDS="neopixel:panel_ring (1-7)"`。一度に指定できるLEDパラメータは1つだけです。複数のLEDのエフェクトを停止するには、コマンドを複数回実行する必要があります。

#### フェードインとフェードアウト
`FADETIME`パラメータを指定することで、エフェクトをフェードイン・フェードアウトさせることができます: `SET_LED_EFFECT EFFECT=panel_idle FADETIME=1.0`はエフェクトを1秒間でフェードインします。`SET_LED_EFFECT EFFECT=panel_idle STOP=1 FADETIME=1.0`はエフェクトを1秒間でフェードアウトします。また、`STOP_LED_EFFECTS FADETIME=1.0`を実行することですべてのエフェクトをフェードアウトできます。また、`REPLACE`パラメータを使用して`SET_LED_EFFECT`でエフェクトをフェードイン・フェードアウトさせることも可能です（上記参照）: `SET_LED_EFFECT EFFECT=panel_idle REPLACE=1 FADETIME=1.0`

### 追加のエフェクトレベルパラメータ

autostart: true  
起動時にエフェクトを開始します

frame_rate:  
エフェクトのフレームレート（1秒あたりのフレーム数）を設定します

run_on_error:  
（MCUファームウェアのパッチが必要です。現在サポートされていません。）

heater:  
ヒーター効果に使用するヒーターを指定します。エクストルーダーには`extruder`、ヒーターベッドには`heater_bed`を使用します。温度ファンやセンサーの場合、タイプを指定してクォートを使用してください。
例: `heater: "temperature_fan myfan"`

analog_pin:  
アナログ信号を使用するエフェクトに使用するピンを指定します。

stepper:  
ステッパーパターンエフェクトに使用する軸を指定します。可能な値は: `x`, `y` および `z`です。例: `stepper: x`

endstops:  
ホームエフェクトがトリガーするエンドストップを指定します。複数のエンドストップはコンマ区切りリストとして指定できます。可能な値は: `x`, `y`, `z` および `probe`です。例: `endstops: x, y`

## LEDの定義

`leds:`セクションは、エフェクトを構成するNeopixelまたはDotstarストリップの一覧です。同じエフェクトで両方を使用できます。各ストリップは別行で定義され、`leds:`セクションの下にインデントされます。

```cfg
leds:
    neopixel:panel_ring
    neopixel:tool_lights
    dotstar:bed_lights
```

さらに、一部のLEDのみがエフェクトを表示するように決定することもできます。これは、ストリップ名の後に使用するLEDのインデックスを指定することで達成されます。インデックスはリストや範囲で指定できます。範囲も逆順に指定することでエフェクトを反転させることができます。インデックスが省略された場合、全体のストリップが使用されます。

また、何らかの理由で同じストリップを異なる発光体を指定してエフェクトに2度使用したい場合もあります。

```cfg
leds:
    neopixel:tool_lights
    neopixel:panel_ring  (1-7)
    neopixel:panel_ring  (16-9)
    dotstar:bed_lights   (1,3,5)
```

## エフェクトレイヤーの定義
エフェクトはフレームとして生成されます。各フレームには、エフェクトに定義されたLED数分のピクセルが含まれます。例えば、22個のLEDが指定されているエフェクトでは、各フレームに22個のピクセルがあります。

各エフェクトレイヤーもフレームとして生成されます。各レイヤーフレームは、次のレイヤーとブレンドされ、エフェクトが生成されます。ブレンドは累積的であり、どのようにカラーがブレンドされるかは、最上位レイヤーのブレンドモードによって定義されます。各レイヤーはそれぞれ独立した行に記載され、独自の設定を持ちます。

ほとんどのエフェクトレイヤー、例えばブレスやグラデーションは、Klipperが開始した際にプリレンダリングされ、後で計算を節約するために保存されます。他には、ファイヤーやツインクルなどはオンデマンドでレンダリングされます。

各レイヤーは以下のパラメータで定義されます：
 * レイヤー名
 * エフェクトレート
 * カットオフ
 * ブレンドモード
 * カラーパレット

各レイヤーは単一の行に記載され、各行はインデントされます。カラーパレットは無制限の長さですが、フレームサイズやストリップ上のLED数によって圧縮される場合があります。カラーは、レッド、グリーン、ブルーおよび（オプションの）ホワイトのグループとして定義されます。ホワイトチャンネルはRGBW LEDでのみ使用され、RGB LEDでは無視されます。各カラーの範囲は、0.0から1.0の小数です。例えば、イエローは`(1.0, 1.0, 0.0)`を使用します。ホワイトはRGB LEDでは`(1.0, 1.0, 1.0)`、RGBW LEDでは`(0.0, 0.0, 0.0, 1.0)`を使用します。

個々のカラーは括弧で囲まれ、コンマで区切られる必要があります。

いくつかのサンプルパレット：

    レインボー    (1.0, 0.0, 0.0),(0.0, 1.0, 0.0),(0.0, 0.0, 1.0)
    ファイアー    (0.0, 0.0, 0.0),(1.0, 0.0, 0.0),(1.0, 1.0, 0.0),(1.0, 1.0, 1.0)
    ブルーコメット (0.8, 1.0, 1.0),(0.0, 0.8, 1.0),(0.0, 0.0, 1.0)

```cfg
layers:
   breathing  .5 0 screen (0,.1,1), (0,1,.5), (0, 1,1), (0,.1,.5)
   static     1 0 bottom (1,.1,0), (1,.1,0), (1,.1,0), (1,1,0)
```

いくつかのエフェクトを選択できます。

#### 静止
    エフェクトレート: 使用されませんが必須です
    カットオフ: 使用されませんが必須です
    パレット: カラーはストリップ全体に均等にブレンドされます
単一のカラーが表示され、変わりません。複数のカラーのパレットが提供された場合、色相に基づいてLED上に均等にブレンドされます。

#### リニアフェード
    エフェクトレート: 3 完全なサイクルの持続時間
    カットオフ: 0 使用されませんが必須です
    パレット: カラーは順番に循環します

LEDはカラーサイクルを通過します。複数のカラーのパレットが提供された場合、パレットで指定された順序でカラーサイクルが進行します。エフェクトレートパラメータは、全てのカラーを通過するのにかかる時間を制御します。

#### ブリーディング
    エフェクトレート: 3 完全なサイクルの持続時間
    カットオフ: 0 使用されませんが必須です
    パレット: カラーは順番に循環します

カラーが消えたり輝いたりします。複数のカラーのパレットが提供された場合、パレットで指定された順序でカラーサイクルが進行します。エフェクトレートパラメータは、「息を吹き込む」のにかかる時間を制御します。

#### ブリンクリング
    エフェクトレート: 1 完全なサイクルの持続時間
    カットオフ: 0.5 LEDが点灯している時間の比率（0から1の間）
    パレット: カラーは順番に循環します

LEDはエフェクト速度に基づいて完全に点灯したり完全に消灯したりします。複数のカラーのパレットが提供された場合、パレットで指定された順序でカラーサイクルが進行します。

#### ストローブ
    エフェクトレート: 1 秒間にストローブする回数
    カットオフ: 1.5 減衰率を決定します。高い数値ほど減衰が速くなります
    パレット: カラーは順番に循環します

LEDは完全に点灯し、その後減衰しながら消灯します。複数のカラーのパレットが提供された場合、パレットで指定された順序でカラーサイクルが進行します。エフェクトレートは、毎秒何回ストローブするかを制御します。カットオフパラメータは減衰率を制御します。良い減衰率は1.5です。

#### ツインクル
    エフェクトレート: 1 LEDが点灯する確率を増加させる
    カットオフ: 0.25 減衰率を決定します。高い数値ほど減衰が速くなります
    パレット: ランダムカラーが選ばれます
ストリップ上でランダムな光のフラッシュと減衰。パレットが指定された場合、パレットからランダムカラーが選ばれます。

#### グラデーション
    エフェクトレート: 1 グラデーションをどれくらい速く循環させるか（負の値は方向を変えます）
    カットオフ: 1 ストリング上のグラデーションの長さ
パレットのカラーがストリングの長さに沿って線形グラデーションで混合されます。エフェクトレートパラメータは、カラーがどれくらい速く循環するかを制御します。エフェクトレートの負の値は、グラデーションの循環方向を変更します（右から左 vs 左から右）。カットオフは、グラデーションの長さをストリングの長さに対して決定します。値が大きいほど、グラデーションは短くなります（例: 値2はストリングの長さに2つのグラデーションがあることを意味します）。

#### パターン
    エフェクトレート: 1 パターンの移動の間隔
    カットオフ: 1 パターンが移動するLED位置の数
    パレット: 配置するパターン
パレットは、ストリング上に反復するパターンとして適用され、ストリング上を移動します。エフェクトレートは秒単位で移動間隔を決定し、カットオフはパターンが移動するLED位置の数を決定します。

#### コメット
    エフェクトレート: 1 コメットが動く速さ（負の値で方向を変更）
    カットオフ: 1 尾の長さ（ある程度任意）
    パレット: "頭"の色と"尾"のグラデーション
光がLED上で移動し、減衰する尾を持っています。方向は負のエフェクトレート値を使用して制御できます。パレットのカラーは、コメットの頭と尾の色を決定します。パレットの最初のカラーはコメットの"頭"の色を、残りのカラーは"尾"のグラデーションを定義します。

#### チェイス
    エフェクトレート: 1 コメットが動く速さ（負の値で方向を変更）
    カットオフ: 1 尾の長さ（ある程度任意）
    パレット: "頭"の色と"尾"のグラデーション
コメットと同じ設定ですが、複数のライトが互いに追いかけているものになります。

#### ヒーター
    エフェクトレート: 1 効果を活性化する最低温度
    カットオフ: 0 温度が達すると効果を無効にする
    パレット: 冷たくて熱い色のブレンド値
この効果は、指定されたヒーターがアクティブになっているか、最低指定温度を超える場合に活性化されます。例えば、ヒーターがオンになり目標温度が設定された場合、LEDはグラデーションカラーを循環させ続けます。目標温度が達すると、最後のグラデーションカラーが使用され、効果は実質的に静的なカラーになります。もしカットオフパラメータが提供された場合、目標温度に達すると効果は無効になります。ヒーターがオフになると、温度が設定された最低温度を下回るまで、このパターンが逆方向に繰り返されます。これにより、ホットエンドやベッドが安全に触れる状態であることが示されます。

#### 温度
    エフェクトレート: 20 寒い温度
    カットオフ: 80 温かい温度
    パレット: 寒いから温かいまでの色のブレンド値
設定されたヒーターの温度は、パレット上のグラデーションカラーを決定します。パレットに1つのカラーしか定義されていない場合、そのカラーの明るさは温度によって決まります。

#### ファイヤー
    エフェクトレート: 45 "火花"の発生確率
    カットオフ: 40 "冷却"の速さ
    パレット: "冷たい"から"熱い"までの色のブレンド値
ArduinoのFastLEDライブラリには、Fire2012WithPaletteというサンプルスケッチが含まれています。この効果はそのスケッチの移植版です。この効果は、LEDを"火花"としてシミュレーションし、その"熱"がLED列全体に伝わり、徐々に冷却されます。火花の発生頻度が高いほど、ストリップのベース部分に多くの熱が蓄積し、より激しい炎が得られます。冷却の速度を変更することで、全体的な炎の長さが長くなったり短くなったりします。

#### HeaterFire
    エフェクトレート: 1 効果を活性化する最低温度
    カットオフ: 0 温度が達すると効果を無効にする
    パレット: "冷たい"から"熱い"までの色のブレンド値
ファイヤー効果ですが、指定されたヒーターの温度に応答します。炎は小さな火種として始まり、ヒーターの目標温度に達するにつれて強度が増します。カットオフパラメータが1に設定されている場合、目標温度に達すると効果は無効になり、そうでない場合はヒーターがオフになるまで効果は維持されます。

#### アナログピン
    エフェクトレート: 10 入力信号の倍率
    カットオフ: 40 効果をトリガーする最小閾値
    パレット: ブレンドする色の値
この効果は、アナログピンから読み取った値を使って色を決定します。パレットに複数の色が指定されている場合、ピンの値に基づいて一つの色が選ばれます。一つの色しか指定されていない場合、明るさはピンの値に比例します。例として、アナログポテンショメータをLEDストリップの明るさを制御するために接続できます。内部的には、入力電圧はアレファ参照電圧に対するパーセンテージとして測定されます。他の使用方法としては、ファンのRPM線を接続することもできます。ただし、過剰な電流や高すぎる電圧がピンやコントローラボードを損傷する可能性があるため、注意深く使用する必要があります。

#### ステッパー
    エフェクトレート: 4 トレiling LEDの数
    カットオフ: 4 リードLEDの数
    パレット: ブレンドする色の値
指定されたステッパーモーターの位置は、パレットの最初のカラーで表現されます。残りのカラーはグラデーションとしてブレンドされ、どちら側でも鏡像されます。ステッパーポジションが軸長に対して変化するにつれ、ライトはストリップ上で上下に移動します。この効果自体は、ステッパーの報告された位置に基づいて、半秒ごとにステッパーの位置を更新します（GET_POSITION GCodeコマンドと同様です）。リアルタイムではありません。エフェクトレートに負の値がある場合、ストッパー位置の前にストリップ全体が埋められます。カットオフに負の値がある場合、ストッパー位置の後ろにストリップ全体が埋められます。

#### ステッパーパレットカラー
    エフェクトレート: 1 ポジションのスケーリング
    カットオフ: 0 ポジションのオフセット
    パレット: ブレンドする色の値
LEDのカラーは、ステッパーモーターの位置によって決まります。位置は0から100の範囲で決定され、エフェクトレートと掛け合わせられ、カットオフがオフセットとして加算されます。これにより、指定されたカラー値のグラデーションが計算されます。

#### プログレスバー
    エフェクトレート: 4 トレailing LEDの数
    カットオフ: 4 leading LEDの数
    パレット: ブレンドする色の値
ステッパと同じ設定ですが、代わりにステッパーの位置ではなく印刷進捗を報告します。

#### ホーミング
    エフェクトレート: 1 減衰率を決定します。高い数値ほど減衰が遅くなります
    カットオフ: 0 使用されませんが必須です
    パレット: カラーは順番に循環します

エンドストップがトリガーされた際、LEDはホーミング中に点灯し、その後再度減衰して消灯します。エフェクトレートは減衰時間を決定します。複数のカラーのパレットが提供された場合、パレットで指定された順序でカラーサイクルが進行します。

## エフェクトレイヤーブレンド
画像編集ソフトウェアを使ったことがある人なら、画像レイヤー間の色ブレンドに慣れているかもしれません。いくつかの一般的な色ブレンド技術が追加され、LEDレイヤーを一緒にブレンドするためのものです。設定ファイルで定義されているレイヤーはトップからボトムへと並べられます。

3つのレイヤーが定義されている場合、最初にボトムレイヤーとミドルレイヤーがブレンドされます。その結果のレイヤーがトップレイヤーとブレンドされます。ボトムレイヤーはどんなブレンドモードが指定されている場合でも他のレイヤーとブレンドされることはありません。

レイヤーブレンドは常にボトムから評価されます。

値は100%の明るさを超えたり、0%の暗さを下回ることはできないため、浮動小数点数（0.0から1.0）として範囲内にクリップされます。

#### bottom
ブレンドは行われず、ボトムレイヤーのカラーチャンネルの値が使用されます。

#### top
ブレンドは行われず、トップレイヤーのカラーチャンネルの値が使用されます。

#### add
```cfg
    ( t + b )
```
カラーチャンネル（レッド、グリーン、ブルー）が相互に加算されます。これにより、チャンネルが明るくなります。

#### subtract
```cfg
    ( b - t )
```
上位レイヤーが下位レイヤーから引き算されます。これにより、類似のカラーが暗くなります。

#### subtract_b
```cfg
    ( t - b )
```
下位レイヤーが上位レイヤーから引き算されます。これにより、類似のカラーが暗くなります。

#### difference
```cfg
    ( t - b ) or ( b - t )
```
2つのレイヤーの中で明るい方から暗い方を引き算します

#### average
```cfg
    ( t + b ) / 2
```
チャンネルの平均値を取ります

#### multiply
```cfg
    ( t * b )
```
チャンネルが相互に掛け合わされます。これは色を暗くするのに役立ちます

#### divide
```cfg
    ( t / b )
```
チャンネルが相互に割り算されます。これにより、色が明るくなります、しばしば白色になります

#### divide_inv
```cfg
    ( b / t )
```
divideと同じですが、逆にボトムがトップで割られます

#### screen
```cfg
    1 - ( 1 - t ) * ( 1 - b )
```
値が逆転され、乗算され、再度逆転されます。divideと同様に、明るい色が得られます

#### lighten
```cfg
    ( t if t > b else b )
```
明るいカラーチャンネルが使用されます

#### darken
```cfg
    ( t if t < b else b )
```
lightenの逆で、暗いカラーチャンネルが使用されます

#### overlay
```cfg
    ( 2ab if a > .5 else 1 - 2( 1 - a )( 1 - b ) )
```
オーバーレイはmultiplyとscreenの組み合わせです。これによりコントラストが向上します。

# サンプル設定例

## das Blinkenlights
重大なエラーが発生した際、すべてのLEDストリップが同時に赤く息を吹き込むことでエラー状態を視覚的に示します。このエフェクトは通常の操作中には無効で、MCUがシャットダウン状態に入ったときにのみ開始されます（現在はサポートされていません）。

```cfg
[led_effect critical_error]
leds:
    neopixel:tool_lights
    neopixel:bed_lights
layers:
    strobe         1  1.5   add        (1.0,  1.0, 1.0)
    breathing      2  0     difference (0.95, 0.0, 0.0)
    static         1  0     top        (1.0,  0.0, 0.0)
autostart:                             false
frame_rate:                            24
run_on_error:                          true
```

## ベッドアイドルと温度
```cfg
[led_effect bed_effects]
leds:
    neopixel:bed_lights
autostart:                          true
frame_rate:                         24
heater:                             heater_bed
layers:
    heater  50 0 add    (1,1,0),(1,0,0)
    static  0  0 top    (1,0,0)
```

## ポテンショメータで調整される明るさ
この例は、アナログピン効果をレイヤーブレンドと組み合わせて、ライトの明るさを制御する方法です。たとえば、熱センサポートにアナログポテンショメータを接続し、そのピンからの電圧読み取りを使用して、ベースレイヤーから色をどれだけ引くかを決定できます。ポテンショメータは、"下げ"たときにピンにフル出力の電圧が出るように配線し、"上げ"たときに最小出力の電圧が出るようにする必要があります。このようにして、ポテンショメータが"下げ"られた場合、カラー`(1.0, 1.0, 1.0)`（フルホワイト）がレイヤーのカラーから引き算され、`(0.0, 0.0, 0.0)`（フルブラック）が得られます。効果レートとカットオフは、具体的なポテンショメータとボードの組み合わせに合わせて調整する必要があります。
```cfg
[led_effect bed_effects]
leds:
    neopixel:bed_lights
autostart:                          true
frame_rate:                         24
analog_pin:                         ar52
layers:
    analogpin 10 0 subtract    (1,1,1)
    static    0  0 top         (1,1,1)
```

## プログレスバー
単一のLEDストリップを使用して、印刷進度は、ダークブルーの背景に明るい青色のラインとして表示されます。

```cfg
[led_effect progress_bar]
leds:
    neopixel:progress_lights
autostart:                          true
frame_rate:                         24
layers:
    progress  -1  0 add         ( 0, 0,   1),( 0, 0.1, 0.6)
    static     0  0 top         ( 0, 0, 0.1)
```

# よくある質問

## LEDがランダムにチラつく

これは通常、何らかの信号問題によるものです。ほとんどのアドレス可能なLEDは特定の通信プロトコルを使用しています。通常、データビットを特定の間隔で送信し、その後リセットラッチを送信して点灯するように指示します。最終的に設定された色が変わるまでは最後の色が続きます。

ほとんどのプリンタファームウェアでのアドレス可能なLEDの実装では、色データはGCodeコマンドが実行されたときに一度だけ送信され、その後送信されません。最初の信号が正しく読めば、それ以降はその色のままです。

この特定の実装では、色データはエフェクトフレームレートによって定期的に更新されます。したがって、1秒間に10フレームの場合、LEDには1秒間に10回の色更新が行われます。

データラインはプリンター上の他の電子機器からの電磁干渉に敏感です。このような干渉が存在する場合、LEDに誤ったデータが送られることがあります。

これを防ぐために、データラインを他のワイヤーから絶縁したり隔離したりする試みができます。データラインをできるだけ短く保つことも重要です。特に32ビットボードでは、データ信号が通常3.3Vで出力されるため、これが特に問題になります。

データラインでの信号の整合性は、リングや反射によっても劣化する可能性があります。特に最初のLEDへのケーブルが長い場合、最初のLEDの直前に700オームの抵抗をラインに追加することでこれを減少させることができます。

もう一つのチラつきの原因は電圧低下です。アドレス可能なLEDは、明るさによって20～60mA程度の電力を消費します。十分な電力を供給できない電源（例えばプリンターボードの内部電圧レギュレーターなど）を使用している場合、チラつきや全体的な暗さが現れることがあります。

## ストリップの端のLEDが他のLEDよりも明るくない

これは通常、ストリップの端のLEDが最初のLEDよりも少ない電力を得ているためです。解決策としては、ストリップの端にVCCとGNDのワイヤーをハンダ付けすることです。これらの追加の電源ラインにより、ストリップの端のLEDが必要な電力を引き出すことができます。これは通常、非常に長いストリップや電源が限界に達している場合に起こります。LEDは常にボードから独立した5Vソースで電源を取ることをお勧めします。

## 色が正しくない

異なるチップメーカーとチップスタイルは、色データのプロトコルに若干の違いを持ちます。一部のメーカーはカラー順序をレッド、グリーン、ブルーとして指定し、他のメーカーはグリーン、レッド、ブルーとして指定します。LEDストリップの設定には、`neopixel`セクションでカラー順序を変更するオプションがあります。

`color_order: GRB`

LEDのカラー順序がわからない場合やテストしたい場合は、既存のすべてのエフェクトをコメントアウトまたは無効にして、直接LEDストリップの色を設定するGCodeコマンドを使用できます。

`SET_LED LED=<config_name> RED=1 GREEN=0 BLUE=0 TRANSMIT=1`

このコマンドはストリップ全体を赤くするはずです。もしストリップが緑色になった場合、それはGRBカラー順序を使用していることを示します。

SK6812のような一部のLEDには白色チャンネルもあります。その場合、カラー順序は以下のように設定できます：

`color_order: GRBW`

* FLYのTPドライバは`colorreorder: GRB`として設定する必要があります

* FLYのTPドライバは`colorreorder: GRB`として設定する必要があります
