---
sidebar_position: 10
sidebar_label: CANブリッジ
---

import GetCanbusUUID from '@site/i18n/ja/docusaurus-plugin-content-docs/current/General/get-id/_get-canid-flyosfast.mdx';


# CANブリッジ

CANバスはリアルタイムアプリケーションに使用されるシリアル通信プロトコルバスであり、シールドツイストペアケーブルを使用して信号を伝送することができます。これは世界で最も広く使用されているフィールドバスの一つです。CANプロトコルは、自動車内のさまざまな要素間の通信に使用され、高価で嵩張る配線ハーネスの代わりに使用されています。このプロトコルの堅牢性により、他の自動化や産業応用にも拡張されています。CANプロトコルの特徴には、完全なシリアルデータ通信、リアルタイムサポート、最大1Mb/sの転送レート、11ビットのアドレス指定、エラー検出機能などが含まれます。
3Dプリンターでは、CANバスを使用してプリントヘッドをメインボードに接続するためのケーブルの数を削減しています。元々は十数本のケーブルが必要でしたが、CANを使用することで、わずか4本のケーブルで済むようになり、ケーブルの数を大幅に削減し、配線の難易度も下げています。
本章では、CANブリッジの使用について簡単に概説します。



## 重要な注意事項

    :::danger 注意

    * FLYシステムのCANレートはデフォルトで`1M`であるため、ツールボードとメインボードも`1M`のファームウェアに書き換えることを推奨します
    * FLYのツールボードは工場出荷時に`Katapult`ファームウェアがデフォルトで書き込まれており、CANレートは`1M`です
    * ツールボードが`Katapult`ファームウェアの状態だと、メインボードにLEDがチカチカ点灯します。これは`KLIPPER`ファームウェアに書き換える必要があることを示しており、正常に接続できない場合があります
    * 電源を切った状態で、マルチメーターを使用して`CANH`と`CANL`の抵抗値が約`60Ω`であるかどうかを測定してください

    :::

## メインボードファームウェアの書き込み

    * C5メインボードに焼込むファームウェアは必ず`USB経由CANファームウェア設定`にしてください
    * 下記のボタンはCAN IDの書き込みと検索を行う方法です
    * <Button variant="contained" disableElevation component="a" rel="noopener" href="/docs/ProductDoc/MainBoard/fly-c/fly-c5/flash/can">USB経由CANファームウェア設定</Button>


## ツールボードをCANでメインボードに接続する

    * ツールボードのモデルが多いため、ここではC5での接続手順のみを紹介します
    * 注意してください、ツールボードの電源ラインはCANポートに接続されるのではなく、12V-24V電源ラインに接続されます
    * `120Ω`のジャンパを接続することを忘れないでください
    <ImageView image={require('@site/docs/ProductDoc/MainBoard/fly-c/fly-c5/img/canbridge.webp').default} size="80%" align="center" />
