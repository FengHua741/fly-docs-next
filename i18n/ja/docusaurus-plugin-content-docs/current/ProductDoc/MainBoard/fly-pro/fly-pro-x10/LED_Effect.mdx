---
sidebar_position: 13
sidebar_label: プラグインでLEDを制御
---


* 自動翻訳機能を使ってウェブページを開いてください

# LEDエフェクト

アドレス可能なLEDは、その柔軟性と比較的簡単な使用法のためにRGB LEDを徐々に置き換えつつあります。各個別の要素が非常に高速で全体のスペクトルの色を表示できるため、さまざまな照明効果を作成するために使用できます。



# ストリップの設定

設定ファイルでは、IOピンに接続された各ストリップまたはチェーンについて定義する必要があります。各ストリップのデータピン（および適用される場合のクロックピン）と、チェーン内のLEDの数が定義されます。LEDエフェクトインスタンスは、複数の異なるタイプとカラーオーダーのストリップを同時に使用できますが、各ストリップはまずそのタイプによって定義される必要があります。

```cfg
[neopixel panel_ring]
pin:                     ar6
chain_count:             16
```

# エフェクトの設定

抽象的に言うと、エフェクトとはストリップが存在する「状態」です。エフェクトは1つまたは100個のLEDで構成されており、1つのエフェクトレイヤーまたは10個のエフェクトレイヤーがあります。これはすべて任意であり拡張可能です。つまり、同時に実行できるレイヤーとLEDの数の唯一の制限は、ホストOSが処理できる能力に依存します。初期テストでは、Raspberry Pi 4上で24 FPSで最大100個のLEDと12層のエフェクトを同時に動作させました。

## 基本的なレイヤー定義

例としてのプリンターには、フロントパネルに設置されている16個のLEDを持つネオピクセルリングと、プリント中のホットエンドの近くに配置された短いネオピクセルLEDのセグメントがあります。

また、ベッドの下に5つのドットスターLEDもあります。ここで示すピン番号は完全に作りものです。

```cfg
[neopixel panel_ring]
pin:                     ar6
chain_count:             16

[neopixel tool_lights]
pin:                     ar15
chain_count:             6

[dotstar bed_lights]
data_pin:                ar21
clock_pin                ar22
chain_count:             5
```

プリンターがオンラインになったときにリングが淡い青色に点灯し、明るさが「息を吸う」ように変化することを希望しています。

```cfg
[led_effect panel_idle]
autostart:              true
frame_rate:             24
leds:
    neopixel:panel_ring
layers:
    breathing  10 1 top (.5,.5,1)
```

これにより、名前`panel_idle`のエフェクトが定義されました。

### エフェクトの制御

エフェクトはアクティブまたは非アクティブの状態です。非アクティブなエフェクトは、色データを出力しませんが、アクティブなエフェクトは各LEDで実行される色データを返し、それらは総合されます。

#### エフェクトのアクティブ化と非アクティブ化

例としてのエフェクトは、GCodeコマンド`SET_LED_EFFECT EFFECT=panel_idle`を実行することでアクティブになります。現在のLED上で動作しているエフェクトを停止するには、`REPLACE`パラメーターを1に設定してください：`SET_LED_EFFECT EFFECT=panel_idle REPLACE=1`。この特定のエフェクトを再び非アクティブにするには、コマンド`SET_LED_EFFECT EFFECT=panel_idle STOP=1`を実行します。すべてのエフェクトを非アクティブにするには、GCodeコマンド`STOP_LED_EFFECTS`を使用します。特定のLEDのエフェクトのみを非アクティブにする場合は、LEDSパラメーターを指定できます：`STOP_LED_EFFECTS LEDS="neopixel:panel_ring"`。また、インデックスを指定することもできます：`STOP_LED_EFFECTS LEDS="neopixel:panel_ring (1-7)"`。一度に指定できるLEDSパラメーターは1つだけです。複数のLEDのエフェクトを停止するには、コマンドを複数回実行する必要があります。

#### フェードインとフェードアウト

`FADETIME`パラメーターを指定することで、エフェクトをフェードイン・フェードアウトできます：`SET_LED_EFFECT EFFECT=panel_idle FADETIME=1.0`は、エフェクトを1秒間でフェードインします。`SET_LED_EFFECT EFFECT=panel_idle STOP=1 FADETIME=1.0`は、エフェクトを1秒間でフェードアウトします。また、`STOP_LED_EFFECTS FADETIME=1.0`を実行することで、すべてのエフェクトをフェードアウトできます。さらに、`SET_LED_EFFECT`で`REPLACE`パラメーターを使用することでエフェクトを交差フェードできます：`SET_LED_EFFECT EFFECT=panel_idle REPLACE=1 FADETIME=1.0`。

### 追加のエフェクトレベルパラメーター

autostart: true
起動時にエフェクトを開始します

frame_rate:
エフェクトのフレームレート（秒あたりのフレーム数）を設定します

run_on_error:
（MCUファームウェアのパッチが必要です。現在サポートされていません。）

heater:
ヒーターエフェクトに使用するヒーターを指定します。エクストルーダーには`extruder`、ヒーターベッドには`heater_bed`を使用します。温度ファンやセンサーの場合、タイプを指定して引用符を使用してください。例：`heater: "temperature_fan myfan"`

analog_pin:
アナログ信号を使用するエフェクトに使用するピンを指定します。

stepper:
ステッパーパターンエフェクトに使用する軸を指定します。可能な値は：`x`、`y`、`z`です。例：`stepper: x`

endstops:
ホームエフェクトがトリガーするエンドストップを指定します。複数のエンドストップをカンマ区切りリストとして指定できます。可能な値は：`x`、`y`、`z`、`probe`です。例：`endstops: x, y`

## LEDの定義

`leds:`セクションは、エフェクトを構成するネオピクセルまたはドットスターのストリップのリストです。同じエフェクトに両方のタイプを使用できます。各ストリップは`leds:`セクションの下に別行で定義されます。

```cfg
leds:
    neopixel:panel_ring
    neopixel:tool_lights
    dotstar:bed_lights
```

また、一部のLEDのみエフェクトを表示するように決定することもできます。これは、ストリップ名の後に使用するLEDのインデックスを指定することで実現します。インデックスはリストまたは範囲として指定できます。範囲は逆順に指定することでエフェクトを反転させることもできます。インデックスが省略された場合、ストリップ全体が使用されます。

さらに、何らかの理由で同じストリップを異なるエミッターと共にエフェクト内で2回使用したい場合もあります。

```cfg
leds:
    neopixel:tool_lights
    neopixel:panel_ring  (1-7)
    neopixel:panel_ring  (16-9)
    dotstar:bed_lights   (1,3,5)
```

## エフェクトレイヤーの定義
エフェクトはフレームとして生成されます。各フレームはエフェクトで定義されたLEDの数分のピクセルを持っています。したがって、22個のLEDが指定されているエフェクトは、各フレームに22ピクセルを持ちます。

各エフェクトレイヤーもフレームとして生成されます。各レイヤーフレームは次のレイヤーとブレンドされ、エフェクトが生成されます。ブレンドは累積的であり、どのように色がブレンドされるかは上位レイヤーのブレンドモードによって定義されます。各エフェクトレイヤーはそれぞれの設定とともに、個別に記述されます。

ほとんどのエフェクトレイヤー、例えばブレスやグラデーションは、Klipperが起動すると事前レンダリングされ、後で計算を節約します。他のエフェクト、例えばファイヤーやツイリンクは、必要に応じてレンダリングされます。

各レイヤーは以下のパラメーターで定義されます。
 * レイヤー名
 * エフェクトレート
 * カットオフ
 * ブレンドモード
 * カラーパレット

各レイヤーは単一行で定義され、各行はインデントされます。カラーパレットは無制限の長さですが、フレームサイズやストリップ上のLEDの数によって圧縮されることがあります。カラーはRed、Green、Blue、そして（オプションで）Whiteのグループとして定義されます。WhiteチャンネルはRGBW LEDでのみ使用され、RGB LEDでは無視されます。各カラーの範囲は0.0から1.0の小数です。例えば、黄色は`(1.0, 1.0, 0.0)`を使用します。白はRGB LEDでは`(1.0, 1.0, 1.0)`、RGBW LEDでは`(0.0, 0.0, 0.0, 1.0)`を使用します。

個別のカラーは括弧で囲まれ、コンマで区切られます。

いくつかのサンプルパレット：

    Rainbow    (1.0, 0.0, 0.0),(0.0, 1.0, 0.0),(0.0, 0.0, 1.0)
    Fire       (0.0, 0.0, 0.0),(1.0, 0.0, 0.0),(1.0, 1.0, 0.0),(1.0, 1.0, 1.0)
    Blue Comet (0.8, 1.0, 1.0),(0.0, 0.8, 1.0),(0.0, 0.0, 1.0)

```cfg
layers:
   breathing  .5 0 screen (0,.1,1), (0,1,.5), (0, 1,1), (0,.1,.5)
   static     1 0 bottom (1,.1,0), (1,.1,0), (1,.1,0), (1,1,0)
```
いくつかのエフェクトを選ぶことができます。

#### Static
    エフェクトレート:  使用されませんが必須です
    カットオフ:       使用されませんが必須です
    パレット:         ストライプ全体に均一に色がブレンドされます
単一のカラーが表示され、変わりません。もし複数のカラーのパレットが提供された場合、色相に基づいてLEDに均一にブレンドされます。

#### LinearFade
    エフェクトレート:  3   完全なサイクルの持続時間
    カットオフ:       0   使用されませんが必須です
    パレット:          カラーが順に循環します

LEDは色にフェードします。もし複数のカラーのパレットが提供された場合、それはパレットで指定された順序でこれらのカラーを循環させます。エフェクトレートパラメーターは、全てのカラーを通過するのにかかる時間を制御します。

#### Breathing
    エフェクトレート:  3   完全なサイクルの持続時間
    カットオフ:       0   使用されませんが必須です
    パレット:          カラーが順に循環します

カラーはフェードインとフェードアウトを行います。もし複数のカラーのパレットが提供された場合、それはパレットで指定された順序でこれらのカラーを循環させます。エフェクトレートパラメーターは、「呼吸」するのにかかる時間を制御します。

#### Blink
    エフェクトレート:  1   完全なサイクルの持続時間
    カットオフ:       0.5 色が点灯している時間の比率（0から1の間）
    パレット:          カラーが順に循環します

LEDは、エフェクト速度に基づいて完全に点灯したり、完全に消灯したりします。もし複数のカラーのパレットが提供された場合、それはパレットで指定された順序でこれらのカラーを循環させます。

#### Strobe
    エフェクトレート:  1   毎秒のストローブ回数
    カットオフ:       1.5 減衰率を決定します。高い数字ほど減衰が速くなります
    パレット:          カラーが順に循環します

LEDは完全に点灯し、その後時間が経つにつれて減衰しながら消灯します。もし複数のカラーのパレットが提供された場合、それはパレットで指定された順序でこれらのカラーを循環させます。エフェクトレートは、毎秒ストローブする回数を制御します。カットオフパラメーターは減衰率を制御します。良い減衰率は1.5です。

#### Twinkle
    エフェクトレート:  1   LEDが点灯する確率を増加させます
    カットオフ:       .25 減衰率を決定します。高い数字ほど減衰が速くなります
    パレット:          ランダムカラーを選択します
ストリップ上でランダムな光のフラッシュと減衰。もしパレットが指定された場合、パレットからランダムなカラーが選ばれます。

#### Gradient
    エフェクトレート:  1   グラデーションをどれくらい早く循環させるか、負の値は方向を変える
    カットオフ:       1   チェーン上のグラデーションの数
    パレット:          均等に間隔を取った線形グラデーション
パレットのカラーは、ストリップの長さに沿って均等に線形グラデーションとしてブレンドされます。エフェクトレートパラメーターは、カラーがどれだけ早く循環されるかを制御します。エフェクトレートの負の値は、グラデーションの循環方向を変えます（右から左または左から右）。カットオフは、グラデーションの長さがチェーン長に対してどれだけ短いかを決定します。値が大きいほど、グラデーションは短くなります（例えば、値2はチェーン長に対して2つのグラデーションを意味します）。

#### Pattern
    エフェクトレート:  1   パターンのシフト間隔
    カットオフ:       1   パターンがシフトされるLEDの位置
    パレット:          シフトされるパターン
パレットは、チェーン上に繰り返し適用され、チェーン上をシフトします。エフェクトレートは、シフト間の時間を秒単位で決定し、カットオフはパターンがシフトされるLEDの位置を決定します。

#### Comet
    エフェクトレート:  1   コメットが移動する速さ、負の値で方向を変更
    カットオフ:       1   余韻の長さ（ある程度任意）
    パレット:          「頭」の色と「尾」のグラデーション
ライトがLEDを通過し、減衰した尾を引きながら動きます。方向は、エフェクトレート値を負にすることで制御できます。パレットのカラーは、コメットの「頭」と「尾」の色を決定します。パレットの最初のカラーはコメットの「頭」の色を定義し、残りのカラーは「尾」にブレンドされます。

#### Chase
    エフェクトレート:  1   コメットが移動する速さ、負の値で方向を変更
    カットオフ:       1   余韻の長さ（ある程度任意）
    パレット:          「頭」の色と「尾」のグラデーション
コメットと同じ設定ですが、複数のライトが互いに追いかけています。

#### Heater
    エフェクトレート:  1   効果をアクティブにする最小温度
    カットオフ:       0   温度が達したら効果を無効にする
    パレット:          冷たくて熱い間でブレンドされるカラーバリュー
この効果は、指定されたヒーターがアクティブになったり、指定された最低温度を超えた場合に有効になります。例えば、ヒーターがオンになり目標温度が設定された場合、LEDはグラデーションのカラーを循環させ続けます。目標温度が達成されると、最後のグラデーションカラーが使用され、効果は基本的に静的なカラーになります。カットオフパラメーターが指定された場合、目標温度が達成された時点で効果は無効になります。ヒーターがオフになると、温度が設定された最低温度以下になるまでこのパターンが逆に繰り返されます。これは、ホットエンドやベッドが安全に触れられる状態であることを示すために使用できます。

#### Temperature
    エフェクトレート:  20 低温
    カットオフ:       80 高温
    パレット:          グラデーションで冷たい色から暖かい色へブレンド
設定されたヒーターの温度は、パレット全体のグラデーションを決める色になります。パレットに1つの色しか指定されていない場合、その色の明るさは温度によって決まります。

#### Fire
    エフェクトレート:  45 スパークする確率
    カットオフ:       40 冷却する速度
    パレット:          グラデーションで冷たい色から暖かい色へブレンド
ArduinoのFastLEDライブラリには、Fire2012WithPaletteというサンプルスケッチが含まれています。この効果はそのスケッチの移植版です。これは、LEDに「火花」を与えることで炎をシミュレートします。「熱」はLEDから先端にかけて徐々に冷却されます。スパークの頻度が高いほど、ストリップのベース部分に多くの熱が蓄積し、より激しい炎が生じます。冷却速度を変更すると、全体的な炎の長さが長くなったり短くなったりします。

#### HeaterFire
    エフェクトレート:  1 最低温度で効果をアクティブにする
    カットオフ:       0 温度が達したら効果を無効にする
    パレット:          冷たい色から熱い色へブレンドされるカラーバリュー
ファイヤー効果ですが、指定されたヒーターの温度に応答します。炎は小さな ember から始まり、ヒーターの目標温度に達するにつれてその強度が高まります。カットオフパラメーターが1に設定された場合、目標温度に達すると効果は無効になりますが、そうでない場合はヒーターがオフになるまでアクティブなままです。

#### AnalogPin
    エフェクトレート:  10 入力信号に対する倍率
    カットオフ:       40 効果を発動させる最小しきい値
    パレット:          ブレンドされるカラーバリュー
この効果は、アナログピンから読み取った値に基づいて色を決定します。もし複数のカラーがパレットに指定された場合、ピンの値に基づいて一つを選択します。もし一つのカラーしか指定されていない場合、明るさはピンの値に比例します。例として、アナログポテンショメータをLEDストリップの明るさを制御するために接続することができます。内部的には、入力電圧はAREFに対する電圧のパーセンテージとして測定されます。他の用途としては、タコメーターがあるファンのRPMワイヤーを接続することもできます。しかし、過剰な電流や高い電圧がピンやコントロールボードを破壊する可能性があるため、注意して使用する必要があります。

#### Stepper
    エフェクトレート:  4 トレーラリングLEDの数
    カットオフ:       4 リーダリングLEDの数
    パレット:          ブレンドされるカラーバリュー
指定されたステッパーモーターの位置は、パレットの最初のカラーで表現されます。残りのグラデーションカラーは、左右どちら側にもミラーリングされます。ステッパーポジションが軸長さに対して相対的に変化すると、ライトはストリップ上で上下に移動します。これは、エフェクト自体がステッパーポジションを半秒ごとにステッパーの報告された位置に基づいて更新することに注意してください。これはリアルタイムではありません。エフェクトレートに負の値がある場合、ステッパーポジションまでの前方全体を埋めます。カットオフに負の値がある場合、ステッパーポジション以降の全体を埋めます。

#### StepperColor
    エフェクトレート:  1 ポジションのスケーリング
    カットオフ:       0 ポジションのオフセット
    パレット:          ブレンドされるカラーバリュー
LEDの色は、ステッパーモーターの位置によって決まります。位置は0から100の間で決定され、エフェクトレートでスケーリングされ、カットオフがオフセットとして加算されます。これにより、指定されたカラーバリューに基づくグラデーションが計算されます。

#### Progress
    エフェクトレート:  4 トレーラリングLEDの数
    カットオフ:       4 リーダリングLEDの数
    パレット:          ブレンドされるカラーバリュー
ステッパーと同じ設定ですが、代わりにプリント進行状況を報告します。

#### Homing
    エフェクトレート:  1 減衰率を決定します。高い数字ほど減衰が遅くなります
    カットオフ:       0 使用されませんが必須です
    パレット:          カラーが順に循環します

エンドストップがトリガーされたときに、Homing中はLEDが点灯し、減衰して消灯します。エフェクトレートは減衰の時間を決定します。もし複数のカラーのパレットが提供された場合、それは順にこれらのカラーを循環させます。

## エフェクトレイヤーのブレンド
画像編集ソフトウェアを使ったことがあれば、画像レイヤー間の色ブレンドに馴染みがあるかもしれません。いくつかの一般的な色ブレンド技術が、LEDレイヤーを一緒にブレンドするために追加されています。設定ファイルで定義されたレイヤーは、上から下へと順序付けられています。

3つのレイヤーが定義されている場合、最下層は最初に中央のレイヤーとブレンドされます。その結果のレイヤーは次に最上層とブレンドされます。最下層は、ブレンドモードが指定されていても他のレイヤーとブレンドされることはありません。

レイヤーのブレンドは常に下から上へ評価されます。

値は100%の明るさと0%の暗さを超えないため、浮動小数点数（0.0から1.0）の範囲にクリップされます。

#### bottom
ブレンドは行われず、最下層のカラーチャンネルの値が使用されます。

#### top
ブレンドは行われず、最上層のカラーチャンネルの値が使用されます。

#### add
```cfg
    ( t + b )
```
カラーチャンネル（赤、緑、青）がお互いに加算されます。これにより、チャンネルが明るくなります。

#### subtract
```cfg
    ( b - t )
```
上位レイヤーが下位レイヤーから引かれます。これにより、似た色が暗くなります。

#### subtract_b
```cfg
    ( t - b )
```
下位レイヤーが上位レイヤーから引かれます。これにより、似た色が暗くなります。

#### difference
```cfg
    ( t - b ) or ( b - t )
```
2つのレイヤーの中で暗い方が明るい方から引かれます。

#### average
```cfg
    ( t + b ) / 2
```
チャンネルの平均が取られます。

#### multiply
```cfg
    ( t * b )
```
チャンネルが掛け合わされます。これは、色を暗くするのに役立ちます。

#### divide
```cfg
    ( t / b )
```
チャンネルが割り算されます。これにより、色が明るくなり、しばしば白色になります。

#### divide_inv
```cfg
    ( b / t )
```
divideと同様ですが、下位レイヤーが上位レイヤーで割られます。

#### screen
```cfg
    1 - ( 1 - t ) * ( 1 - b )
```
値が反転され、乗算され、再度反転されます。divideと同様に、明るい色になります。

#### lighten
```cfg
    ( t if t > b else b )
```
明るい方のカラーチャンネルが使われます。

#### darken
```cfg
    ( t if t < b else b )
```
lightenの逆で、暗い方のカラーチャンネルが使われます。

#### overlay
```cfg
    ( 2ab if a > .5 else 1 - 2( 1 - a )( 1 - b ) )
```
overlayはmultiplyとscreenの組み合わせです。これは、コントラストを高める効果を持っています。

# サンプル設定

## das Blinkenlights
重大なエラーが発生した際、すべてのLEDストリップが揃って赤く息を吸うように点滅して、プリンターのエラー状態を視覚的に示します。このエフェクトは通常操作時には無効であり、現在サポートされていないMCUのシャットダウン状態に入ったときにのみ開始されます。

```cfg
[led_effect critical_error]
leds:
    neopixel:tool_lights
    neopixel:bed_lights
layers:
    strobe         1  1.5   add        (1.0,  1.0, 1.0)
    breathing      2  0     difference (0.95, 0.0, 0.0)
    static         1  0     top        (1.0,  0.0, 0.0)
autostart:                             false
frame_rate:                            24
run_on_error:                          true
```

## 床の待機状態と温度
```cfg
[led_effect bed_effects]
leds:
    neopixel:bed_lights
autostart:                          true
frame_rate:                         24
heater:                             heater_bed
layers:
    heater  50 0 add    (1,1,0),(1,0,0)
    static  0  0 top    (1,0,0)
```

## ポテンショメータによる明るさ制御
アナログピンエフェクトをレイヤーブレンドと組み合わせて、ライトの明るさを制御する方法の例です。ポテンショメータをサーミスタポートに接続し、そのピンからの電圧読み取りを使用して、レイヤーの基本カラーからどれだけの色を引くかを決定できます。ポテンショメータは、ポテンショメータを「下げた」際にアナログピンにフル出力があり、それを「上げた」際に最小出力となるように配線する必要があります。このように、ポテンショメータが「下げ」ている場合、カラー(1.0, 1.0, 1.0)(完全な白色)がレイヤーのカラーから引かれ、結果として(0.0, 0.0, 0.0)(完全な黒)が得られます。効果レートとカットオフは、具体的なポテンショメータとボードの組み合わせに合わせて調整する必要があります。
```cfg
[led_effect bed_effects]
leds:
    neopixel:bed_lights
autostart:                          true
frame_rate:                         24
analog_pin:                         ar52
layers:
    analogpin 10 0 subtract    (1,1,1)
    static    0  0 top         (1,1,1)
```

## プログレスバー
単一のLEDストリップを使用して、プリント進行状況は暗い青色の背景に明るい青色のラインとして表示されます。

```cfg
[led_effect progress_bar]
leds:
    neopixel:progress_lights
autostart:                          true
frame_rate:                         24
layers:
    progress  -1  0 add         ( 0, 0,   1),( 0, 0.1, 0.6)
    static     0  0 top         ( 0, 0, 0.1)
```

# よくある質問

## 私のLEDがランダムにチラチラしています

これは通常、信号に関する問題です。ほとんどのアドレス可能なLEDには、通信に使用される特定のプロトコルがあります。通常、データビットを特定の間隔で送信し、その後リセットラッチを送信して、LEDを点灯させるためにシグナルを送ります。LEDは最後に設定された色に留まり続けますが、何か違う指示が来るとそれが変わります。

ほとんどのプリンタファームウェアでのアドレス可能なLEDの実装では、カラー情報はgcodeコマンドが実行されたときに一度だけ送信され、その後は送信されません。その最初のシグナルが正しく読めれば、LEDはその色のままであるはずです。

この特定の実装では、カラー情報はエフェクトフレームレートによって決定された定期的な間隔で更新されます。したがって、1秒間に10フレームの場合、LEDには1秒間に10回カラー情報が更新されます。

データラインはプリンターの他の電子機器からの電磁干渉に敏感です。このような干渉がある場合、LEDに誤ったデータが送られることになります。

これを防ぐために、データラインを他のワイヤーから絶縁または分離してみることができます。データラインはできるだけ短くすることが推奨されます。これは特に32ビットボードで問題となりやすく、通常3.3Vでデータ信号を出力するためです。

データラインでのサインインテグリティは、リッジングや反射によっても劣化する可能性があります。特に最初のLEDへのケーブルが長い場合、これが減少します。これを減らすには、最初のLEDの直前に700Ωの抵抗をデータラインに追加します。

もう一つのチラつきの原因は電圧低下です。アドレス可能なLEDは、輝度に応じて20から60mAの電力を消費します。十分な電力を供給できない電源（プリンター基板の内部電圧レギュレータなど）を使用している場合、チラつきや全体的な薄暗さが現れることがあります。

## ストリップの端のLEDが他のLEDよりも明るくない

これは、ストリップの端のLEDが最初のLEDに比べて十分な電力を得られていないためです。解決策は、ストリップの端にVCCとGNDのワイヤーをハンダ付けすることです。これらの追加の電源ラインにより、ストリップの端のLEDが必要な電力を引き出すことができます。これは通常、非常に長いストリップや電源が限界に達している場合に発生します。ボードからLEDを5Vの別電源で駆動することは常に推奨されます。

## 私の色が正しくありません

異なるチップメーカーとチップスタイルは、カラー情報を伝達する際にわずかに異なるプロトコルを使用します。一部のプロトコルではカラー順序が赤、緑、青ですが、他のプロトコルでは緑、赤、青です。LEDストリップの設定には、'neopixel'セクションでカラー順序を変更できるオプションがあります。

`color_order: GRB`

あなたのLEDのカラー順序がわからない場合やテストしたい場合は、既存のすべてのエフェクトをコメントアウトまたは無効にして、LEDストリップの色を直接設定するgcodeコマンドを使用できます。

`SET_LED LED=<config_name> RED=1 GREEN=0 BLUE=0 TRANSMIT=1`

このコマンドは、ストリップ全体を赤に変更するはずです。もしストリップが緑に変わった場合、それはGRBカラー順序を使用しています。

SK6812のような一部のLEDには白色チャネルもあります。その場合、カラー順序は次のように設定できます：

`color_order: GRBW`

* FLYのTPドライバは`colorreorder: GRB`として設定する必要があります

* FLYのTPドライバは`colorreorder: GRB`として設定する必要があります
