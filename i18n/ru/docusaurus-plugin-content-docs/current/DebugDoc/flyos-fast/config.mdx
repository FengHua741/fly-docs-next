---
sidebar_position: 3
---

# Настройка системы

:::tip Важно

- Настройки в разделе `частей` файла конфигурации будут действовать только при первом запуске системы после прошивки.
- Поэтому перед вставкой карты в плату для запуска системы сначала отредактируйте файл конфигурации config.txt на мобильном носителе FlyOS-Conf после прошивки.
- Затем вставьте карту в плату и запустите систему.

:::

:::warning Внимание

- Старайтесь не использовать стандартный редактор заметок в Windows для редактирования файла конфигурации; лучше используйте VSCode или другой профессиональный текстовый редактор.
- В файле конфигурации лучше не вводить китайские символы или специальные символы.
- После изменения файла конфигурации необходимо перезагрузить систему для применения изменений.

:::

:::danger

- Не изменяйте содержимое ниже `######### PLEASE DO NOT EDIT THE FOLLOWING #########`.

:::

## Как изменить файл конфигурации

### Изменение файла конфигурации после прошивки

- Настройки, которые должны действовать только при первом запуске, можно изменить только после прошивки, открыв файл config.txt на мобильном носителе FlyOS-Conf с помощью профессионального текстового редактора.

### Изменение конфигурации системы во время работы

- Для обычных настроек, внесенных через веб-интерфейс системы, достаточно перезагрузить систему после их изменения.
    - Откройте в браузере IP-адрес устройства, например: `http://192.168.1.2/`
    - Для Fluidd снимите галочку -> `Скрыть скрытые файлы и папки`.
    - Для Mainsail поставьте галочку -> `Показать скрытые файлы`.
    
    <table>
      <tr>
        <td>
          <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/config1.webp').default} size="100%" align="center" />
        </td>
        <td>
          <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/config2.webp').default} size="85%" align="center" />
        </td>
      </tr>
    </table>

    - Теперь вы увидите папку `.flyos-config`. Перейдите в эту папку, где есть файл `sys-config.conf`.
    - Файл `sys-config.conf` является soft-ссылкой на файл конфигурации `config.txt` на мобильном носителе FlyOS-Conf.

    <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/config3.webp').default} size="60%" align="center" />

    - Откройте файл `sys-config.conf`, внесите необходимые изменения, сохраните и закройте файл.
    
    <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/config4.webp').default} size="60%" align="center" />

    - Важно: формат строк в файле `sys-config.conf` должен быть `ключ=значение`, а не `ключ: значение`.
    - После сохранения изменений перезагрузите систему для их применения.

## Параметры конфигурации

### Настройка беспроводной сети

- Следующие параметры применяются при каждом запуске системы.

| Параметр | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :---: | :--- | :--- |
| `WIFI_SSID` | `пусто` | любое имя Wi-Fi | Имя Wi-Fi; если указано, система будет автоматически подключаться к этому Wi-Fi при старте |
| `WIFI_PASS` | `пусто` | оставить пустым, если пароль отсутствует | Пароль Wi-Fi; если указано, используется для подключения к Wi-Fi |

----

### Настройка принтера по умолчанию

:::tip
- Следующие параметры действуют только при первом запуске.
:::

| Параметр | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :---: | :--- | :--- |
| `language` | `zh-CN` | <details><summary>развернуть подробное содержимое</summary>`zh-CN`, `zh-HK`, `en`, `de`, `cz`, `es`, `hu`, `ja`, `nl`, `pt`, `se`, `uk`, `da`, `fr`, `it`, `ko`, `pl`, `ru`, `tr`</details> | Установка начального языка по умолчанию для Fluidd и Mainsail при первом запуске |
| `printer_name` | `пусто` | произвольная строка | Установка начального имени принтера по умолчанию для Fluidd и Mainsail |

----

### Настройки системы

- Следующие параметры применяются при каждом запуске системы.

| Параметр | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :-------: | :--- | :--- |
| `console` | `serial` | `serial`, `both` | Этот параметр не следует изменять; только serial действителен |
| `board` | H5: `fly-pi-v2`<br/>H3: `fly-lite2.1` | <details><summary>развернуть серию H5</summary>`fly-pi`, `fly-pi-v2`, `fly-gemini-v1`, `fly-gemini-v2`, `fly-gemini-v3`, `fly-c8`</details><br/><details><summary>развернуть серию H3</summary>`fly-lite2`, `fly-lite2.1`, `fly-minipad`</details> | Модель материнской платы, используется в основном для автоматической прошивки |
| `shutdown_pin_state` | `1` | `0`, `1` | Устанавливает состояние пина кнопки выключения<br/>1: триггер на низкий уровень<br/>0: триггер на высокий уровень |
| `shutdown_pin` | `none` | `PA21`, `PA4`... | Устанавливает пин триггера кнопки выключения, по умолчанию none (не включено) |
| `spidev` | `spidev0.0 spidev1.0` | `spidev0.0`, `spidev0.1`, `spidev1.0`, `spidev1.1` | Устанавливает порты для включения spidev<br/>Для включения нескольких используйте пробел |
| `localtime` | `Asia/Shanghai` | [Таблица часовых поясов](/docs/DebugDoc/flyos-fast/timezone) | Устанавливает часовой пояс системы; система автоматически синхронизируется с временем при подключении к сети |
| `canbus_bitrate` | `1000000` | `1000000`, `500000`, `250000` | Устанавливает скорость по умолчанию для всех устройств CAN в системе, по умолчанию 1М |

----

### Настройки типа принтера

- Следующие параметры применяются при каждом запуске системы.

| Параметр | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :-------: | :--- | :--- |
| `printer` | `klipper` | `klipper`, `rrf` | Настройка службы для запуска системы<br/>`klipper`: услуги klipper, moonraker и т. д.<br/>`rrf`: службы RRF DSF, DWC и т. д. |

### Настройки экрана

- Следующие параметры применяются при каждом запуске системы.

| Параметр | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :-------: | :--- | :--- |
| `screen` | `hdmi` | <details><summary>развернуть серию H5</summary>`none`, `hdmi`, `fly-tft-v1`, `fly-tft-v2-r`, `fly-tft-v2-c`</details><br/><details><summary>развернуть серию H3</summary>`none`, `hdmi`, `fly-tft-v1`, `fly-minipad-r`, `fly-minipad-c`, `fly-tft-v2-r`, `fly-tft-v2-c`</details> | Установка экрана, none отключает все дисплеи |
| `rotate` | `90` | `0`, `90`, `180`, `270` | Установка угла поворота экрана FLY-TFT, hdmi не влияет |

----

### Настройки Klipper

- Следующие параметры применяются при каждом запуске системы.

| Параметр | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :-------: | :--- | :--- |
| `klipper_screen` | `0` | `0`, `1` | Устанавливает, включать ли KlipperScreen<br/>1: включить<br/>0: выключить<br/>действительно при `printer=klipper` |
| `moon2uart` | `0` | `0`, `1` | Устанавливает, включать ли moon2uart<br/>1: включить<br/>0: выключить<br/>действительно при `printer=klipper` |
| `m2u_port` | `/dev/ttyS1` | допустимые последовательные порты | Порт UART для moon2uart, действует при `moon2uart=1` |
| `m2u_baud` | `115200` | допустимые скорости передачи данных | Скорость UART для moon2uart, действует при `moon2uart=1` |
| `klipper_webui` | `fluidd` | `fluidd`, `mainsail` | Устанавливает стандартный интерфейс UI Klipper<br/>не влияет на функцию переключения веб-интерфейса<br/>действительно при `printer=klipper` |

----

### Настройки RRF

- Следующие параметры применяются при каждом запуске системы.

| Параметр | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :-------: | :--- | :--- |
| `rrf2uart` | `0` | `0`, `1` | Пока недействительно, в будущих версиях будет добавлена поддержка |

----

### Другие настройки

- Следующие параметры применяются при каждом запуске системы.

| Параметр | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :-------: | :--- | :--- |
| `crowsnest` | `0` | `0`, `1` | Устанавливает, включать ли Crowsnest<br/>1: включить<br/>0: выключить<br/>доступно в режимах klipper и rrf |

:::tip
- Следующие параметры действуют только при первом запуске.
:::

| Параметр | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :-------: | :--- | :--- |
| `firmware` | `пусто` | допустимые пути к файлам прошивки | Устанавливает автоматическую прошивку прошивки при загрузке, действует только для C8 и Gemini-V3 |

----

:::danger

- Не изменяйте содержимое ниже `######### PLEASE DO NOT EDIT THE FOLLOWING #########`.

:::