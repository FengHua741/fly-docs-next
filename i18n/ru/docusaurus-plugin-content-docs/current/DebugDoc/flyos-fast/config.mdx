---
sidebar_position: 3
---

# Настройка системы

:::tip Важно

- Настройки в разделе `частично` файла конфигурации действуют только при первом запуске системы после прошивки.
- Поэтому сначала измените файл конфигурации config.txt на съемном диске `FlyOS-Conf` после прошивки.
- Затем вставьте карту в плату и запустите систему.

:::

:::warning Внимание

- Старайтесь не использовать встроенный в Windows редактор заметок для редактирования файла конфигурации, используйте VSCode или другой профессиональный текстовый редактор.
- В файле конфигурации лучше не вводить китайские символы или специальные символы.
- После изменения файла конфигурации система должна быть перезагружена для применения изменений.

:::

:::danger

- Не изменяйте содержимое ниже `######### PLEASE DO NOT EDIT THE FOLLOWING #########` в файле конфигурации.

:::

## Как изменить файл конфигурации

### Изменение файла конфигурации после прошивки

- Настройки, которые действуют только при первом запуске, должны быть изменены после прошивки, используя профессиональный текстовый редактор для открытия файла конфигурации `config.txt` на съемном диске `FlyOS-Conf`.

### Онлайн изменение конфигурации во время работы системы

- Если это обычные настройки, их можно изменить на веб-странице конфигурации системы и затем перезагрузить систему для их применения.
    - Откройте браузер и введите IP-адрес устройства, например: `http://192.168.1.2/`
    - Для Fluidd снимите галочку с `скрытые файлы и папки`.
    - Для Mainsail установите галочку на `отображение скрытых файлов`.
    
    <table>
      <tr>
        <td>
          <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/config1.webp').default} size="100%" align="center" />
        </td>
        <td>
          <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/config2.webp').default} size="85%" align="center" />
        </td>
      </tr>
    </table>

    - Теперь вы можете увидеть папку `.flyos-config`. Перейдите в эту папку, где будет находиться файл `sys-config.conf`.
    - Файл `sys-config.conf` является ссылкой на файл конфигурации `config.txt` на съемном диске `FlyOS-Conf`.

    <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/config3.webp').default} size="60%" align="center" />

    - Откройте файл `sys-config.conf`, сделайте необходимые изменения и сохраните его, закрыв после этого.
    
    <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/config4.webp').default} size="60%" align="center" />

    - Обратите внимание: формат настроек в файле `sys-config.conf` должен быть `ключ=значение`, а не `ключ: значение`.
    - После сохранения изменений система должна быть перезагружена для их применения.

## Настройки

### Настройка беспроводной сети

- Следующие настройки применяются при каждом запуске системы.

| Настройка | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :---: | :--- | :--- |
| `WIFI_SSID` | `пусто` | Любой SSID Wi-Fi | Имя Wi-Fi, если указано, система при запуске автоматически попытается подключиться к этому Wi-Fi |
| `WIFI_PASS` | `пусто` | Оставить пустым, если нет пароля | Пароль Wi-Fi, если указано, система будет использовать этот пароль для подключения к Wi-Fi |

----

### Настройки принтера по умолчанию

:::tip
- Следующие настройки действуют только при первом запуске.
:::

| Настройка | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :---: | :--- | :--- |
| `language` | `zh-CN` | <details><summary>Развернуть для подробностей</summary>`zh-CN`, `zh-HK`, `en`, `de`, `cz`, `es`, `hu`, `ja`, `nl`, `pt`, `se`, `uk`, `da`, `fr`, `it`, `ko`, `pl`, `ru`, `tr`</details> | Установите язык по умолчанию для Fluidd и Mainsail при первом запуске |
| `printer_name` | `пусто` | Любая строка | Установите имя принтера по умолчанию для Fluidd и Mainsail при первом запуске |

----

### Настройки системы

- Следующие настройки применяются при каждом запуске системы.

| Настройка | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :-------: | :--- | :--- |
| `console` | `serial` | `serial`, `both` | Эта настройка не должна изменяться, только `serial` действует |
| `board` | H5: `fly-pi-v2`<br/>H3: `fly-lite2.1` | <details><summary>Развернуть для H5 серии</summary>`fly-pi`, `fly-pi-v2`, `fly-gemini-v1`, `fly-gemini-v2`, `fly-gemini-v3`, `fly-c8`</details><br/><details><summary>Развернуть для H3 серии</summary>`fly-lite2`, `fly-lite2.1`, `fly-minipad`</details> | Модель основной платы, используется для автоматической прошивки и т.д. |
| `shutdown_pin_state` | `1` | `0`, `1` | Установите состояние вывода кнопки питания<br/>1: низкий уровень триггера<br/>0: высокий уровень триггера |
| `shutdown_pin` | `none` | `PA21`, `PA4`... | Установите вывод кнопки питания, по умолчанию `none` не включено |
| `spidev` | `spidev0.0 spidev1.0` | `spidev0.0`, `spidev0.1`, `spidev1.0`, `spidev1.1` | Установите порты, которые нужно включить для spidev, разделяйте несколько портов пробелами |

----

### Настройки типа принтера

- Следующие настройки применяются при каждом запуске системы.

| Настройка | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :-------: | :--- | :--- |
| `printer` | `klipper` | `klipper`, `rrf` | Настройка системы для запуска службы<br/>`klipper`: klipper, moonraker и другие службы<br/>`rrf`: RRF DSF, DWC и другие службы |

### Настройки экрана

- Следующие настройки применяются при каждом запуске системы.

| Настройка | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :-------: | :--- | :--- |
| `screen` | `hdmi` | <details><summary>Развернуть для H5 серии</summary>`none`, `hdmi`, `fly-tft-v1`, `fly-tft-v2-r`, `fly-tft-v2-c`</details><br/><details><summary>Развернуть для H3 серии</summary>`none`, `hdmi`, `fly-tft-v1`, `fly-minipad-r`, `fly-minipad-c`, `fly-tft-v2-r`, `fly-tft-v2-c`</details> | Настройка экрана, `none` отключает все отображения |
| `rotate` | `90` | `0`, `90`, `180`, `270` | Настройка угла поворота FLY-TFT, `hdmi` не влияет |

----

### Настройки, связанные с Klipper

- Следующие настройки применяются при каждом запуске системы.

| Настройка | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :-------: | :--- | :--- |
| `klipper_screen` | `0` | `0`, `1` | Настройка использования KlipperScreen<br/>1: включить<br/>0: отключить<br/>`printer=klipper` действует |
| `moon2uart` | `0` | `0`, `1` | Настройка использования moon2uart<br/>1: включить<br/>0: отключить<br/>`printer=klipper` действует |
| `m2u_port` | `/dev/ttyS1` | Действительные последовательные порты | Порт последовательного соединения для moon2uart, действует при `moon2uart=1` |
| `m2u_baud` | `115200` | Действительные скорости передачи данных | Скорость передачи данных для moon2uart, действует при `moon2uart=1` |
| `klipper_webui` | `fluidd` | `fluidd`, `mainsail` | Настройка стандартного интерфейса front-end Klipper<br/>Не влияет на функцию однокликовой смены режимов<br/>`printer=klipper` действует |

----

### Настройки, связанные с RRF

- Следующие настройки применяются при каждом запуске системы.

| Настройка | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :-------: | :--- | :--- |
| `rrf2uart` | `0` | `0`, `1` | Пока неактивно, будет обновлено в будущих версиях |

----

### Другие настройки

- Следующие настройки применяются при каждом запуске системы.

| Настройка | Значение по умолчанию | Допустимые значения | Описание |
| :---: | :-------: | :--- | :--- |
| `crowsnest` | `0` | `0`, `1` | Настройка использования Crowsnest<br/>1: включить<br/>0: отключить<br/>Действует в режимах klipper и rrf |
| `firmware` | `пусто` | Действительные пути к файлам прошивки | Настройка прошивки для автоматической загрузки при запуске |

----

:::danger

- Не изменяйте содержимое ниже `######### PLEASE DO NOT EDIT THE FOLLOWING #########` в файле конфигурации.

:::