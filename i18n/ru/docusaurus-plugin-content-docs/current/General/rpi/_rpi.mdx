## Важные замечания

    1. Запрещено извлекать устройства, кроме USB, при включенном питании
    2. Интерфейс Type C можно использовать как для питания, так и как интерфейс USB SLAVE для записи образа
    3. Для обеспечения нормального питания CM4 при записи образа через интерфейс Type C не подключайте другие устройства.
    4. Модуль не имеет никакой защиты, короткое замыкание источника питания запрещено.
    5. Материнская плата FLY не поддерживает функцию POE! Не используйте POE для питания

:::danger Важно
* Обратите внимание: версия с EMMC не может использоваться с картой SD
* Обратите внимание: версия без EMMC требует использования MICRO SD-карты для загрузки системы, для записи образа необходим считыватель
* Рекомендуется использовать TF-карту класса `class10` или выше, например, от производителя SanDisk
:::

    <ImageView image={require('@site/docs/General/rpi/img/emmc.webp').default} size="100%" align="left" />

## Ссылка на загрузку системы TFTV2 для Raspberry Pi

    * Системный образ для Raspberry Pi 3B/3B+/4B/CM4/5B
    * В образ предварительно установлены klipper, moonraker, mainsail, fulidd, klipper-screen и другие программы

    ```bash
    https://cdn.mellow.klipper.cn/IMG/Beta/RPI-TFT-IMG-new.img.xz
    ```

## Скачать образ

    * Скачать систему [нажмите здесь для скачивания](https://www.raspberrypi.org/downloads/raspberry-pi-os/) последней официальной версии (или как показано на рисунке).
    * Если скачали файл torrent, используйте программу Xunlei или Comet для повторной загрузки.

    <ImageView image={require('@site/docs/General/rpi/img/rpi.webp').default} size="70%" align="left" />


    * Образ с рабочим столом и рекомендованными программами `(Raspberry Pi OS с рабочим столом и рекомендуемым программным обеспечением)`, рекомендуется использовать с накопителем EMMC объемом 16 ГБ или выше для Lite версии CM4 с памятью 16 ГБ

:::danger Важно
Версия с EMMC требует включения режима записи при выключенном питании, способ включения режима записи описан ниже
:::

:::danger Важно
* Версия с EMMC требует входа в режим записи для доступа к системе, ниже приведен способ входа в режим записи
* Версия Lite не требует входа в режим записи, после форматирования можно сразу записывать образ
:::

## Скачать rpiboot (программу загрузки)

    * Скачать и открыть программу rpiboot с правами администратора [нажмите здесь для скачивания](https://files.waveshare.net/wiki/w/upload/f/f3/Rpiboot_setup.zip)
    * Установить драйверы и инструменты для запуска. После успешной установки в каталоге установки появится приложение rpiboot.exe

    <ImageView image={require('@site/docs/General/rpi/img/boot.webp').default} size="80%" align="left" />

## Вход в режим записи

    * Подключите компьютер и подайте питание на материнскую плату, в диспетчере устройств компьютера будет обнаружено устройство BCMxxx

        <ImageView image={require('@site/docs/General/rpi/img/bcm2711.webp').default} size="80%" align="left" />


    * Запустите rpiboot

        <ImageView image={require('@site/docs/General/rpi/img/rpiboot.webp').default} size="80%" align="left" />


    * Дождитесь завершения работы, в моем компьютере появится буква диска U盘

:::danger Важно
Внимание: если компьютер не распознал устройство BCMxxx, возможно, где-то допущена ошибка. Убедитесь, что устройство BCMxxx распознано перед запуском rpiboot, иначе операция будет неэффективной.
:::


## Форматирование EMMC или карты SD

    * Используйте программу SDFormatter.exe [скачать здесь](https://www.waveshare.net/w/upload/d/d7/Panasonic_SDFormatter.zip) для форматирования карты SD

        <ImageView image={require('@site/docs/General/rpi/img/sdformatter.webp').default} size="80%" align="left" />


    * Или удалите разделы с помощью встроенных средств Windows "Дисковое управление", затем создайте новые разделы.
    * Щелкните правой кнопкой мыши "Этот компьютер" -> Управление -> Дисковое управление -> Найдите новый диск (если выбран неправильный диск, все пропало) -> Удалите все разделы -> Создайте один раздел (любую файловую систему). Если диск уже использовался для записи системы, может быть два диска, просто проигнорируйте их и выполните форматирование или удаление разделов.

## Запись образа

    1. Используйте Raspberry Pi Imager [скачать здесь](https://www.raspberrypi.com/software/) для записи образа.
    2. Перед записью образа необходимо настроить имя пользователя и пароль, а также включить SSH

            <ImageView image={require('@site/docs/General/rpi/img/imager.webp').default} size="80%" align="left" />


    3. После завершения записи образа в моем компьютере появится буква диска U盘

## Завершение записи и перезагрузка

    * После завершения записи отключите питание, отключите соединение с компьютером, переведите переключатель BOOT обратно. Повторное включение питания выполнит перезагрузку

## Важные замечания для Raspberry Pi zero2 и zero2W

    * Эти замечания предназначены для пользователей, работающих с G2T и FLY-TFT экраном
    * Для Raspberry Pi zero2 и zero2w требуется изменить настройки стандартного устройства отображения, выполните следующий код для изменения
    * Обратите внимание, что после выполнения кода потребуется перезагрузка системы для применения изменений
    ```cfg
    sudo sed -i 's/\/dev\/fb0/\/dev\/fb1/g' /etc/X11/xorg.conf.d/99-fbdev.conf
    ```
