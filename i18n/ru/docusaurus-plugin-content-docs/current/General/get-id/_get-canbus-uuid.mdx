## Настройка CAN и поиск ID

* Если вы планируете использовать CAN, убедитесь, что ваш ПК имеет настроенный CAN.

----

:::danger Важно

Убедитесь, что материнская плата подключена к ПК перед выполнением следующих действий.

:::


:::warning

Убедитесь, что сеть CAN на ПК, скорость CAN на мостовой плате и скорость CAN-инструментов полностью совпадают.

:::

### Примечания перед поиском устройства

    * Перед поиском CAN ID убедитесь, что вы [подключились по SSH](/docs/DebugDoc/BasicTutorial/index.mdx "щелкните для перехода").
    * Убедитесь, что вы подключены к SSH через сеть, а не через последовательный порт.
    * Убедитесь, что UTOC подключен или на материнской плате установлен прошивочный CAN-мост, и убедитесь, что соединительный кабель с ПК обладает функцией передачи данных.

### Поиск устройства

    * Теперь, когда вы успешно подключены к ПК, можете ввести команду `lsusb`, чтобы найти устройство. Возможны следующие варианты:
        * Если ввод команды `lsusb` приводит к сообщению об отсутствии команды `ls`, введите следующую команду для установки:
            ```bash
            sudo apt-get install usbutils
            ```
        * Если ввод команды `lsusb` не дает никакой реакции, это системная проблема, и мы бессильны. Вам нужно заменить систему или использовать проверенную систему.
        * При появлении информации, изображенной ниже, обратите внимание, что это только пример. Вам нужно просто убедиться, что появляется `1d50:606f`.
            <ImageView image={require('@site/docs/General/get-id/img/606f.webp').default} size="100%" align="left" />
    * `1d50:606f` является устройством, которое вам необходимо использовать. Последующие сообщения можно игнорировать, так как системные проблемы могут вызывать неполное отображение или даже полное отсутствие отображения.
    * Если имеется несколько `1d50:606f`, рекомендуется исключить одно, чтобы избежать конфликтов при дальнейшей прошивке и подключении устройства. Например, если используется FLY MINI PAD, предпочтительно использовать встроенную UTOC, а не другие CAN-мостовые устройства.
    * Если ничего не найдено, проверьте правильность подключения кабеля и корректность прошивки.

:::warning Важно

Поиск CAN ID возможен только при наличии `1d50:606f`.

:::

### Поиск CAN ID

    * Введите следующую команду для поиска ID:
    ```bash
    ~/klippy-env/bin/python ~/klipper/scripts/canbus_query.py can0
    ```
    * Если появляется ID и в конце `Application:` указано `Klipper`, это означает, что данный ID может быть использован.
    * Если появляется ID и в конце `Application:` указано `CANBOOT` или `Katapult`, это означает, что для использования требуется прошивка.
        <ImageView image={require('@site/docs/General/get-id/img/canbus-uuid.webp').default} size="50%" align="left" />


### Сборник вопросов по CAN

    :::danger Важно

    * Если не удается найти CAN ID, ознакомьтесь с документацией ниже.
    * <Button variant="contained" disableElevation href="/docs/DebugDoc/faq/klipper_can">Сборник вопросов по CAN</Button>

    :::

### Заполнение ID CAN в конфигурацию

    * Откройте веб-интерфейс принтера, найдите в левом меню конфигурационные параметры. Для Fluidd это будет `{…}`, для Mainsail — «Машина», затем перейдите к файлу `printer.cfg`.

        <ImageView image={require('@site/docs/General/get-id/img/fluidd-cfg.webp').default} size="50%" align="left" />

    * Скопируйте полученный UUID и запишите его в секцию `[mcu]` файла конфигурации `printer.cfg` под ключом `canbus_uuid: `. После сохранения и перезагрузки соединение с материнской платой должно быть установлено. Если Klipper сообщает о необходимости обновления прошивки или возникают ошибки ADC, это означает, что соединение с материнской платой установлено.

        <ImageView image={require('@site/docs/General/get-id/img/canbus-uuid.webp').default} size="50%" align="left" />

        :::danger

        Важно: Все указанные в документации ID являются примерами. У каждого контроллера они уникальны, поэтому используйте фактические полученные значения.

        :::
