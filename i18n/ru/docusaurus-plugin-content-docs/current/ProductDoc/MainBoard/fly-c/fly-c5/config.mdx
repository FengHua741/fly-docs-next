---
sidebar_position: 3
---

# Настройка системы

:::tip Важно

- Настройки в разделе `частичные` файла конфигурации действуют только при первом запуске системы после прошивки.
- Поэтому перед установкой карточки в плату сначала отредактируйте файл конфигурации config.txt на мобильном диске FlyOS-Conf.
- Затем вставьте карту в плату для запуска системы.

:::

:::warning Внимание

- Старайтесь не использовать стандартный редактор заметок в Windows для изменения файла конфигурации. Рекомендуется использовать VSCode или другие профессиональные текстовые редакторы.
- В файле конфигурации лучше избегать китайских символов и специальных символов.
- После изменения файла конфигурации систему необходимо перезагрузить для применения изменений.

:::

:::danger

- Не изменяйте содержимое ниже `######### PLEASE DO NOT EDIT THE FOLLOWING #########`.

:::

## Как изменить файл конфигурации

### Изменение файла конфигурации после прошивки

- Настройки, которые действуют только при первом запуске, необходимо изменять после прошивки, используя профессиональный текстовый редактор для открытия файла config.txt на мобильном диске FlyOS-Conf.

### Изменение конфигурации онлайн во время работы системы

- Для обычных настроек, после их изменения в веб-интерфейсе системы и перезапуска системы изменения вступают в силу.
    - Откройте в браузере IP-адрес устройства, например: `http://192.168.1.2/`
    - В Fluidd снимите галочку -> «Фильтр скрытых файлов и папок».
    - В Mainsail поставьте галочку -> «Показать скрытые файлы».
    
    <table>
      <tr>
        <td>
          <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/config1.webp').default} size="100%" align="center" />
        </td>
        <td>
          <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/config2.webp').default} size="85%" align="center" />
        </td>
      </tr>
    </table>

    - Теперь вы увидите папку `.flyos-config`. Перейдите в эту папку, где находится файл `sys-config.conf`.
    - Файл `sys-config.conf` является символической ссылкой на файл конфигурации `config.txt` на мобильном диске FlyOS-Conf.

    <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/config3.webp').default} size="60%" align="center" />

    - Откройте файл `sys-config.conf`, сделайте необходимые изменения и сохраните его -> закройте.
    
    <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/config4.webp').default} size="60%" align="center" />

    - Обратите внимание: формат настроек в файле `sys-config.conf` — `ключ=значение`, не изменяйте на `ключ: значение`.
    - После сохранения изменений система должна быть перезагружена для применения.

## Параметры конфигурации

### Настройка беспроводной сети

- Данные параметры действуют при каждом запуске системы.

| Параметр | Значение по умолчанию | Доступные значения | Описание |
| :---: | :---: | :--- | :--- |
| `WIFI_SSID` | Пусто | Любой SSID Wi-Fi | SSID Wi-Fi; если указан, система будет автоматически подключаться к данному Wi-Fi при запуске |
| `WIFI_PASS` | Пусто | Оставить пустым, если пароль отсутствует | Пароль Wi-Fi; если указан, система будет подключаться к Wi-Fi с паролем |

----

### Настройка принтера по умолчанию

:::tip
- Данные параметры действуют только при первом запуске.
:::

| Параметр | Значение по умолчанию | Доступные значения | Описание |
| :---: | :---: | :--- | :--- |
| `language` | `zh-CN` | <details><summary>Нажмите, чтобы развернуть подробности</summary>`zh-CN`, `zh-HK`, `en`, `de`, `cz`, `es`, `hu`, `ja`, `nl`, `pt`, `se`, `uk`, `da`, `fr`, `it`, `ko`, `pl`, `ru`, `tr`</details> | Устанавливает язык по умолчанию для fluidd и mainsail при первом запуске |
| `printer_name` | Пусто | Любой строковой литерал | Устанавливает имя принтера по умолчанию для fluidd и mainsail при первом запуске |

----

### Настройка системы

- Данные параметры действуют при каждом запуске системы.

| Параметр | Значение по умолчанию | Доступные значения | Описание |
| :---: | :-------: | :--- | :--- |
| `console` | `serial` | `serial`, `both` | Данную настройку не следует изменять; только serial эффективен |
| `board` | H5: `fly-pi-v2`<br/>H3: `fly-lite2.1` | <details><summary>Развернуть для H5 серии</summary>`fly-pi`, `fly-pi-v2`, `fly-gemini-v1`, `fly-gemini-v2`, `fly-gemini-v3`, `fly-c8`</details><br/><details><summary>Развернуть для H3 серии</summary>`fly-lite2`, `fly-lite2.1`, `fly-minipad`</details> | Модель материнской платы, используется в основном для автоматической прошивки |
| `shutdown_pin_state` | `1` | `0`, `1` | Устанавливает логическое состояние кнопки выключения<br/>1: низкий уровень триггер<br/>0: высокий уровень триггер |
| `shutdown_pin` | `none` | `PA21`, `PA4`... | Устанавливает триггерный вывод кнопки выключения, по умолчанию none (не активирован) |
| `spidev` | `spidev0.0 spidev1.0` | `spidev0.0`, `spidev0.1`, `spidev1.0`, `spidev1.1` | Устанавливает порты для активации spidev<br/>Чтобы активировать несколько, используйте пробел для разделения |
| `localtime` | `Asia/Shanghai` | [Список часовых поясов](/docs/DebugDoc/flyos-fast/timezone) | Устанавливает часовой пояс системы, после подключения к интернету система автоматически корректирует время |
| `canbus_bitrate` | `1000000` | `1000000`, `500000`, `250000` | Устанавливает базовую скорость всех CAN-устройств системы, по умолчанию 1М |

----

### Настройка типа принтера

- Данные параметры действуют при каждом запуске системы.

| Параметр | Значение по умолчанию | Доступные значения | Описание |
| :---: | :-------: | :--- | :--- |
| `printer` | `klipper` | `klipper`, `rrf` | Настройка системы для запуска службы<br/>`klipper`: службы klipper, moonraker и т. д.<br/>`rrf`: службы RRF DSF, DWC и т. д. |

### Настройка экрана

- Данные параметры действуют при каждом запуске системы.

| Параметр | Значение по умолчанию | Доступные значения | Описание |
| :---: | :-------: | :--- | :--- |
| `screen` | `hdmi` | <details><summary>Развернуть для серии H5</summary>`none`, `hdmi`, `fly-tft-v1`, `fly-tft-v2-r`, `fly-tft-v2-c`</details><br/><details><summary>Развернуть для серии H3</summary>`none`, `hdmi`, `fly-tft-v1`, `fly-minipad-r`, `fly-minipad-c`, `fly-tft-v2-r`, `fly-tft-v2-c`</details> | Настройка экрана, none означает отключение всех экранов |
| `rotate` | `90` | `0`, `90`, `180`, `270` | Настройка угла поворота FLY-TFT, неактивно для HDMI |

----

### Настройки, связанные с Klipper

- Данные параметры действуют при каждом запуске системы.

| Параметр | Значение по умолчанию | Доступные значения | Описание |
| :---: | :-------: | :--- | :--- |
| `klipper_screen` | `0` | `0`, `1` | Настройка использования KlipperScreen<br/>1: Включить<br/>0: Выключить<br/>Эффективно при `printer=klipper` |
| `moon2uart` | `0` | `0`, `1` | Настройка использования moon2uart<br/>1: Включить<br/>0: Выключить<br/>Эффективно при `printer=klipper` |
| `m2u_port` | `/dev/ttyS1` | Действительные последовательные порты | Порт последовательной связи moon2uart, эффективно при `moon2uart=1` |
| `m2u_baud` | `115200` | Действительные скорости передачи данных | Скорость передачи данных moon2uart, эффективно при `moon2uart=1` |
| `klipper_webui` | `fluidd` | `fluidd`, `mainsail` | Настройка стандартного интерфейса пользовательского веб-приложения Klipper<br/>Не влияет на функцию переключения веб-интерфейса онлайн<br/>Эффективно при `printer=klipper` |

----

### Настройки, связанные с RRF

- Данные параметры действуют при каждом запуске системы.

| Параметр | Значение по умолчанию | Доступные значения | Описание |
| :---: | :-------: | :--- | :--- |
| `rrf2uart` | `0` | `0`, `1` | Пока неактивно, доступность в будущих версиях |

----

### Другие настройки

- Данные параметры действуют при каждом запуске системы.

| Параметр | Значение по умолчанию | Доступные значения | Описание |
| :---: | :-------: | :--- | :--- |
| `crowsnest` | `0` | `0`, `1` | Настройка использования Crowsnest<br/>1: Включить<br/>0: Выключить<br/>Доступно в режимах klipper и rrf |

:::tip
- Данные параметры действуют только при первом запуске.
:::

| Параметр | Значение по умолчанию | Доступные значения | Описание |
| :---: | :-------: | :--- | :--- |
| `firmware` | Пусто | Действительные пути к файлам прошивки | Настройка автопрошивки firmware при загрузке, пока доступно только для C8 и Gemini-V3 |

----

:::danger

- Не изменяйте содержимое ниже `######### PLEASE DO NOT EDIT THE FOLLOWING #########`.

:::
