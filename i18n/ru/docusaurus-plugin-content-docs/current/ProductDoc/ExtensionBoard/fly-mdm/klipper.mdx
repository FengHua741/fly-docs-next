---
sidebar_position: 4
sidebar_label: Настройка Klipper
---

# Настройка Klipper

## Настройка функции обнаружения конца проволоки

```cfg
[filament_switch_sensor mdm_switch_sensor]
switch_pin: ^PG12 # Замените на используемый пин, подключенный к датчику конца проволоки
pause_on_runout: True
# При значении "True" принтер будет немедленно приостановлен при обнаружении конца проволоки.
# Обратите внимание, что если pause_on_runout установлено в False и не определено
# runout_gcode, то обнаружение конца проволоки будет отключено.
# По умолчанию True.

runout_gcode:
    PAUSE
    M118 Конец проволоки
# insert_gcode:
event_delay: 1.0
# Минимальная задержка между событиями (в секундах).
# Все события, произошедшие в этот период, будут игнорироваться по умолчанию.
# По умолчанию 3 секунды.

pause_delay: 0.5
# Задержка между командой приостановки и выполнением runout_gcode (в секундах).
# В случае использования OctoPrint увеличение этой задержки может улучшить надежность приостановки.
# Если OctoPrint демонстрирует неправильное поведение при остановке, попробуйте увеличить эту задержку.
# По умолчанию 0.5 секунды.

```

## Настройка функции обнаружения затора проволоки

```cfg
[filament_motion_sensor mdm_motion_sensor]
switch_pin: PD6       # Замените на используемый пин, подключенный к датчику затора
detection_length: 3.5 # Минимальная длина, которая вызывает изменение состояния пина switch_pin датчика
extruder: extruder
# Данный датчик связан с экструдером.
# Этот параметр должен быть обязательно указан.
    
# pause_on_runout:
runout_gcode:
    PAUSE
    M118 Затор проволоки
# insert_gcode:
event_delay: 3.0
pause_delay: 1.0

```
