---
sidebar_position: 4
sidebar_label: Настройка Klipper
---

# Настройка Klipper

## Настройка функции обнаружения окончания материала

<div style={{
    border: '3px solid #d32f2f',
    borderRadius: '8px',
    background: '#fffbe6',
    padding: '20px',
    margin: '20px 0',
    textAlign: 'center',
    fontWeight: 'bold',
    fontSize: '1.4em',
    color: '#d32f2f',
    boxShadow: '0 2px 8px rgba(211,47,47,0.08)'
}}>
⚠️ В файле настроек <strong>диаметр материала должен быть изменен на 2.85 мм</strong><br/>
и в конфигурационном файле принтера срезщика также должно быть <strong>изменено на 2.85 мм</strong>
</div>

```cfg
[filament_switch_sensor mdm_switch_sensor]
switch_pin: ^PG12 # Замените на используемый пин, подключенный к пину детектора окончания материала
pause_on_runout: True
# При значении "True" принтер будет немедленно приостановлен при обнаружении окончания материала.
# Обратите внимание, что если pause_on_runout установлено в False и не определено.
# runout_gcode, то обнаружение окончания материала будет отключено.
# По умолчанию True.

runout_gcode:
    PAUSE
    M118 Окончание материала
# insert_gcode:
event_delay: 1.0
# Минимальная задержка между событиями (в секундах).
# События, произошедшие в течение этого времени, будут игнорироваться по умолчанию.
# По умолчанию 3 секунды.

pause_delay: 0.5
# Задержка между командой приостановки и выполнением runout_gcode, в секундах.
# Если используется OctoPrint, увеличение этой задержки может улучшить надежность приостановки.
# Если OctoPrint демонстрирует странное поведение при приостановке, рассмотрите возможность увеличения этой задержки.
# По умолчанию 0.5 секунд.

```

## Настройка функции обнаружения затора

```cfg
[filament_motion_sensor mdm_motion_sensor]
switch_pin: PD6       # Замените на используемый пин, подключенный к пину детектора затора
detection_length: 3.7 # Минимальная длина, необходимая для изменения состояния пина switch_pin триггера
extruder: extruder
# Данный датчик связан с экструдером.
# Этот параметр должен быть указан.

# pause_on_runout:
runout_gcode:
    PAUSE
    M118 Затор
# insert_gcode:
event_delay: 3.0
pause_delay: 1.0

```
