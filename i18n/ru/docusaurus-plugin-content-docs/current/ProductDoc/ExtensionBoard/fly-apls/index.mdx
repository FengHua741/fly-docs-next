---
sidebar_position: 1
---

# Введение
Модуль давления apls — это решение для измерения давления на основе ADS131M02, разработанное специально для автоматической калибровки Z-оси (Home) и сеточной калибровки платы с打印机ов. Благодаря высокочувствительному датированию давления и обработке сигналов в реальном времени, модуль может точно определять контакт между головкой печати и платой, обеспечивая точность калибровки до миллиметрового уровня и устраняя погрешности механической калибровки, что значительно повышает успех первого слоя печати.

## Использование модуля давления apls

### Рекомендуемое использование функции протирки
При использовании модуля давления apls рекомендуется использовать функцию протирки, чтобы обеспечить чистоту сопла и тем самым повысить точность и стабильность калибровки.

#### Схема подключения XH2.54 4Pin
Модуль можно подключить напрямую к UART-интерфейсу материнской платы или к UART-интерфейсу расширительной платы. Если нет UART-интерфейса, найдите на материнской плате две ножки и убедитесь, что полярность питания соблюдена.
<ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-apls/img/uart.webp').default} size="100%" align="center" />

### Примечания при установке
1. Убедитесь, что модуль установлен надежно, чтобы избежать проблем с соединением из-за вибраций во время печати.
2. Проверьте правильность подключения проводов, чтобы предотвратить неправильную работу модуля.
3. Перед первым использованием рекомендуется выполнить несколько тестов калибровки, чтобы убедиться, что чувствительность и точность модуля соответствуют ожиданиям.

## Отображение состояния индикатора
- **Состояние подачи питания**: Зеленый светодиодный индикатор горит постоянно, указывая на нормальную работу модуля.
- **Состояние активации**: Индикатор в красной рамке выключен, указывая на активацию модуля.
<ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-apls/img/LED.webp').default} size="20%" align="center" />

### Диагностика неисправностей индикатора
- Если индикатор не загорается, проверьте правильность подключения проводов питания.
- Если индикатор мигает постоянно, возможно, модуль обнаружил аномальные сигналы. Проверьте, не застрял ли зонд или не поврежден ли он.

## Руководство по конфигурации
Замените существующие настройки в файле конфигурации для секций `probe` и `home` следующими настройками:

### Пример файла конфигурации
Вот рекомендуемое содержимое файла конфигурации; отредактируйте его в соответствии с вашими потребностями:


```cfg
[homing_override]
axes: xyz
set_position_z:10
gcode:
       G91
       G1 Z10 F3000
       G90
        SET_PIN PIN=_probe_ready VALUE=0
        ## _LIFT_Z
       {% set home_all = 'X' not in params and 'Y' not in params and 'Z' not in params %}

       {% if home_all or 'X' in params %}
            G28 X
       {% endif %}

       {% if home_all or 'Y' in params %}
            G28 Y
            G0 X{printer.toolhead.axis_maximum.x / 2} Y{printer.toolhead.axis_maximum.y / 2} F6000
       {% endif %}

       {% if home_all or 'Z' in params %}
       # Если используется совместно с eddy и датчиком давления, раскомментируйте следующую строку
            #SET_PIN PIN=_probe_ready VALUE=1 
            G28 Z 
            #SET_PIN PIN=_probe_ready VALUE=0
            G1 Z10 F3000           
        {% endif %}

[output_pin _probe_ready]
pin: PA9
shutdown_value: 0

[probe]
pin: PA10
x_offset: 0                  # Смещение по оси X относительно сопла
y_offset: 0               # Смещение по оси Y относительно сопла
z_offset:0                # Смещение по оси Z относительно сопла
speed: 8                 # Скорость калибровки
samples: 3                   # Количество выборок
samples_result: median       # Метод вычисления результата (по умолчанию - медиана)
sample_retract_dist: 2     # Дистанция отката при калибровке
samples_tolerance: 0.05      # Толеранс выборки (слишком малые значения могут увеличить количество выборок)
samples_tolerance_retries: 3 # Количество попыток повтора при превышении толеранса
activate_gcode:
           G4 P500
           SET_PIN PIN=_probe_ready VALUE=1
deactivate_gcode:
           SET_PIN PIN=_probe_ready VALUE=0  
```

### Рекомендации по настройке значения z-offset
Используйте эту команду для настройки значения z-offset:
```gcode
PROBE_CALIBRATE
```

- Перед изменением значения `z-offset` ознакомьтесь с руководством Klipper по методу "Paper Test": [Paper Test](https://www.klipper3d.org/Bed_Level.html#the-paper-test)

:::info Внимание
- Если планируется использовать модуль как концевик Z-оси, замените настройку `endstop_pin` на: `endstop_pin: probe:z_virtual_endstop`
:::
