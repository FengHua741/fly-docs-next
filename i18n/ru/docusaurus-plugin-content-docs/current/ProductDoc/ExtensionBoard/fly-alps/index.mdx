---
sidebar_position: 1
---

# Введение
Модуль давления ALPS является решением для измерения давления на основе ADS131M02 и разработан специально для автоматической настройки Z-оси (Home) и сетевой системы выравнивания платформы в 3D-принтерах. С помощью высокочувствительного детектирования давления и обработки сигналов в реальном времени, модуль может точно определять контакт между соплом и поверхностью печати, обеспечивая точность выравнивания на уровне миллиметров, устраняя погрешности механической настройки и значительно повышая успешность первого слоя печати.
# Сравнение параметров
<ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-alps/img/csdb.webp').default} size="100%" align="center" />

## Использование модуля давления APLS

### Рекомендуется использовать функцию протирки сопла
При использовании модуля давления APLS рекомендуется сочетать его с функцией протирки сопла, чтобы обеспечить чистоту сопла и повысить точность и стабильность настройки.

#### Схема подключения через разъем XH2.54 4Pin
Модуль можно напрямую вставить в UART-порт материнской платы или подключить к UART-порту расширительной платы. Если UART-порта нет, найдите на материнской плате две ножки и убедитесь в правильности подключения положительного и отрицательного проводов.
<ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-alps/img/uart1.webp').default} size="100%" align="center" />
<ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-alps/img/uart.webp').default} size="100%" align="center" />

### Замечания при установке
1. Убедитесь, что модуль установлен надежно, чтобы предотвратить проблемы с соединением из-за вибраций во время печати.
2. Проверьте правильность подключения проводов, чтобы избежать неисправностей модуля из-за ошибок подключения.
3. Перед первым использованием рекомендуется выполнить несколько тестов настройки, чтобы убедиться, что чувствительность и точность модуля соответствуют ожиданиям.

## Отображение индикатора состояния
- **Состояние подачи питания**: постоянное свечение зеленого светодиода в красном корпусе указывает на нормальную работу модуля.
- **Триггерное состояние**: мигание красного светодиода указывает на активацию триггера модуля.
<ImageView image={require('@site/docs/ProductDoc/ExtensionBoard/fly-alps/img/LED.webp').default} size="20%" align="center" />

### Диагностика неисправностей индикатора состояния
- Если индикатор не загорается, проверьте правильность подключения источника питания.
- Если индикатор постоянно мигает, возможно, модуль обнаружил аномальные сигналы. Проверьте, не застрял ли зонд или не поврежден ли он посторонним предметом.

## Гайд по конфигурации
Необходимо заменить соответствующие части конфигурационного файла, связанные с «probe» и «обратной настройкой», добавив следующие настройки:

### Пример конфигурационного файла
Вот рекомендуемый файл конфигурации, который нужно скорректировать в зависимости от фактических требований:


```cfg
[homing_override]
axes: xyz
set_position_z:10
gcode:
       G91
       G1 Z10 F3000
       G90
        SET_PIN PIN=_probe_ready VALUE=0
        ## _LIFT_Z
       {% set home_all = 'X' not in params and 'Y' not in params and 'Z' not in params %}

       {% if home_all or 'X' in params %}
            G28 X
       {% endif %}

       {% if home_all or 'Y' in params %}
            G28 Y
            G0 X{printer.toolhead.axis_maximum.x / 2} Y{printer.toolhead.axis_maximum.y / 2} F6000
       {% endif %}

       {% if home_all or 'Z' in params %}
       # Если используется совместно с eddy и датчиком давления, раскомментируйте следующую строку
            #SET_PIN PIN=_probe_ready VALUE=1 
            G28 Z 
            #SET_PIN PIN=_probe_ready VALUE=0
            G1 Z10 F3000           
        {% endif %}

[output_pin _probe_ready]
pin: PA9 #En #Пин управления
shutdown_value: 0

[probe]
pin: PA10 #out #Пин зонда
x_offset: 0                  # Смещение по оси X относительно сопла
y_offset: 0               # Смещение по оси Y относительно сопла
z_offset:0                # Смещение по оси Z относительно сопла
speed: 8                 # Скорость выравнивания
samples: 3                   # Количество выборок
samples_result: median       # Метод выбора значений (по умолчанию - медиана)
sample_retract_dist: 2     # Отступ от зонда при выравнивании
samples_tolerance: 0.05      # Толеранс выборки (не рекомендуется слишком малое значение, так как это может увеличить количество выборок)
samples_tolerance_retries: 3 # Количество попыток повторной выборки при превышении толеранса
activate_gcode:
           G4 P500
           SET_PIN PIN=_probe_ready VALUE=1
deactivate_gcode:
           SET_PIN PIN=_probe_ready VALUE=0  
```

### Инструкция по корректировке значения z-offset
Используйте следующую команду для настройки z-offset:
```gcode
PROBE_CALIBRATE
```

- Перед корректировкой значения z-offset ознакомьтесь с руководством по настройке Klipper: [Paper Test](https://www.klipper3d.org/Bed_Level.html#the-paper-test)

:::info Важно
- Если планируется использовать модуль давления как ограничитель Z-оси, замените конфигурацию endstop_pin на: `endstop_pin: probe:z_virtual_endstop`
:::
