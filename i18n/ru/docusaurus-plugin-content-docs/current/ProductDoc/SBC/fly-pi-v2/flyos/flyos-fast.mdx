---
sidebar_position: 1
sidebar_label: Прошивка системы FLYOS-FAST
---

Рекомендуется использовать эту систему! Это система, специально адаптированная для 3D-принтеров от FLY!

# Прошивка системы FLYOS-FAST

## Процесс прошивки

Инструкция по прошивке системы FLYOS-FAST: <Button variant="contained" disableElevation href="/docs/DebugDoc/flyos-fast/#introduction">инструкция по прошивке системы FLYOS-FAST</Button>


<br/>
<br/>
<br/>


## Краткое описание системы

* FlyOS-Fast — это облегченная операционная система Linux, специально адаптированная для 3D-печати, с быстрым запуском (всего 30 секунд). Поддерживает все платформы Fly.
* Оптимизирован ядро для повышения реального времени работы Klipper.
* Оптимизирован файловая система для предотвращения повреждений системы при внезапном отключении питания.
* Предустановлены службы Klipper, RRF, Mainsail, Fluidd, Moonraker, KlipperScreen.
* Поддерживается переключение между системами Klipper и RRF.
* Поддерживается переключение между интерфейсами Mainsail и Fluidd в режиме онлайн.
* Поддерживается печать с USB-накопителя.
* В сочетании с модулем KPPM можно реализовать продолжение печати после отключения питания.
* Возможна настройка языка по умолчанию для интерфейса Fluidd и имени принтера по умолчанию.
* Дополнительные OEM-функции: логотип при старте, предварительно установленные конфигурационные файлы, скрытие вкладок Mainsail и т. д. — свяжитесь с нами для получения дополнительной информации.

## Подготовка

1. Скачайте образ системы:
    - Ссылка на образ: [Скачать образ системы для Piv2](https://g-ofpa1390.coding.net/public-artifacts/3D-Printers/flyos-fast/FlyOS-Fast-H5.exe/version/50907014/overview "Нажмите здесь, чтобы перейти") (только для Windows).
    - Ссылка на образ: [Скачать образ системы для Piv2](https://g-ofpa1390.coding.net/public-artifacts/3D-Printers/flyos-fast/FlyOS-Fast-H5.7z/version/50907002/overview "Нажмите здесь, чтобы перейти") (для Windows, MacOS, Linux).

    <ImageView image={require('@site/docs/ProductDoc/SBC/fly-pi-v2/img/flyos-fast_download.webp').default} size="90%" align="center" />


2. Скачайте инструмент для записи образа. Для примера будет использоваться `Rufus`. На практике можно использовать другие инструменты, такие как `Etcher`, `Win32 Disk Imager`.
    - Скачать Rufus: [Скачать на русском](https://rufus.ie/zh/#download) или [Download English](https://rufus.ie/en/#download) (только для Windows).
    - Скачать Etcher: [Скачать](https://etcher.balena.io/#download-etcher) (для Windows, MacOS, Linux).
    - Скачать Win32 Disk Imager: [Скачать](https://sourceforge.net/projects/win32diskimager/) (только для Windows).

3. Для примера будет использоваться `FlyOS-Fast-H5.exe`.

4. Разархивируйте образ системы, чтобы получить файл `.img`.
    - Дважды кликните или откройте правой кнопкой мыши `FlyOS-Fast-H5.exe`, подождите несколько секунд, и появится окно (если система предупреждает о небезопасности, выберите «Дополнительная информация» → «Запустить»).
    - Выберите директорию для распаковки, затем нажмите кнопку `Extract`, подождите завершения процесса.
    
    <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/ext1.webp').default} size="60%" align="center" />

    - После распаковки в папке появится файл `FlyOS-Fast-H5-vx.x.x.img`, где `x.x.x` — версия системы.

## Запись образа

    <Tabs>
        <TabItem value="TF" label="Запись на TF-карту" default>
            ## Запись на TF-карту
            1. - Для записи TF-карты необходима карта объемом более 4 ГБ, рекомендуется использовать карту SanDisk объемом 32 ГБ и выше (C10) (во время тестирования выяснилось, что многие дешевые карты после записи не запускаются).
               - Для записи TF-карты используйте SD-карту с кардридером, вставьте карточку в кардридер, а затем подключите кардридер к компьютеру.
            2. Откройте `Rufus`, выберите устройство. Выбранное устройство должно показывать объем, совпадающий с объемом TF-карты, подключенной к компьютеру.
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash1.webp').default} size="40%" align="center" />
    
            3. Выберите файл образа, щелкните по кнопке `Выбрать` справа от поля `Тип загрузочного устройства`, чтобы выбрать `.img` файл, распакованный ранее.
            4. После выбора файла образа поле `Тип загрузочного устройства` изменится на название файла образа.
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash2.webp').default} size="40%" align="center" />
            
            5. Нажмите кнопку `Старт`. Если появится окно с предупреждением о необходимости очистки данных диска, нажмите `ОК`.
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash3.webp').default} size="50%" align="center" />
            
            6. После завершения записи компьютер издаст звуковой сигнал, и прогресс-полоса станет `Готов`.
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash4.webp').default} size="40%" align="center" />
            
            7. После завершения записи не торопитесь вынимать карточку.
            8. Откройте проводник, проверьте наличие флешки или мобильного устройства с именем `FlyOS-Conf`.
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash5.webp').default} size="60%" align="center" />
            
            9. Откройте `FlyOS-Conf`. Если в нем присутствуют два указанных ниже файла, значит запись прошла успешно.
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash6.webp').default} size="70%" align="center" />
            
            10. Из них файл `config.txt` — это файл конфигурации системы. Просмотрите следующую страницу для содержимого. Отредактируйте файл конфигурации.

        </TabItem>
        <TabItem value="M2WE" label="Через USB запись на M2WE">
            ## Через USB запись на M2WE
            1. Скачайте драйверы:
               - <Button variant="contained" disableElevation href="https://cdn.mellow.klipper.cn/Utils/zadig-2.7.exe">Драйверы для M2WE</Button>
               - <Button variant="contained" disableElevation href="https://cdn.mellow.klipper.cn/Utils/FLY-BOOT-Setup.msi">Инструмент загрузки BOOT для M2WE</Button>

            2. Установите драйверы:
               - Откройте `Zadig`, в меню `Options` выберите пункт `List All Devices`
    
            <ImageView image={require('@site/docs/General/fly-os/img/zadig.webp').default} size="80%" align="left" />
            
            3. Установите M2WE, затем нажмите кнопку `BOOT` на материнской плате и подключите верхнюю плату к компьютеру двусторонним USB-кабелем
            
            <ImageView image={require('@site/docs/ProductDoc/SBC/fly-pi-v2/img/piv2_boot1.webp').default} size="70%" align="center" />
            <ImageView image={require('@site/docs/ProductDoc/SBC/fly-pi-v2/img/piv2_boot2.webp').default} size="70%" align="center" />
    
            4. Откройте zadig
    
            <ImageView image={require('@site/docs/General/fly-os/img/zadig1.webp').default} size="80%" align="center" />
        
            5. Если все выполнено правильно, в zadig появится новое устройство `Неизвестное устройство #x` или `USB Device(VID_1f3a_PID_efe8)`, выберите его
        
            <ImageView image={require('@site/docs/General/fly-os/img/zadig2.webp').default} size="80%" align="center" />
        
            6. После выбора устройства проверьте, совпадает ли USB ID с изображенным выше. Если нет, выберите другое устройство
            7. Во втором месте можно выбрать только `WinUSB(vxxxxxxx)`, версия не имеет значения
            8. Нажмите `Установить драйвер`, установите драйвер, **драйвер нужно установить только один раз на одно устройство**
    
            <ImageView image={require('@site/docs/General/fly-os/img/zadig3.webp').default} size="80%" align="center" />

            9. Откройте установленный инструмент FLY-BOOT, нажмите `Проверить устройство`. Если все предыдущие шаги выполнены правильно, появится сообщение о том, что доступное устройство найдено.
            <ImageView image={require('@site/docs/General/fly-os/img/fly_boot1.webp').default} size="60%" align="center" />

            10. Нажмите кнопку `Запустить BOOT`, если все выполнено корректно, появится сообщение о том, что BOOT успешно включен, подождите несколько секунд перед выполнением следующего шага

            <ImageView image={require('@site/docs/General/fly-os/img/fly_boot2.webp').default} size="60%" align="center" />
            
            11. Откройте `Rufus`, выберите устройство. Выбранное устройство должно показывать объем, совпадающий с объемом TF-карты, подключенной к компьютеру.  
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash1.webp').default} size="40%" align="center" />
    
            12. Выберите файл образа, щелкните по кнопке `Выбрать` справа от поля `Тип загрузочного устройства`, чтобы выбрать `.img` файл, распакованный ранее.
            13. После выбора файла образа поле `Тип загрузочного устройства` изменится на название файла образа.
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash2.webp').default} size="40%" align="center" />
            
            14. Нажмите кнопку `Старт`. Если появится окно с предупреждением о необходимости очистки данных диска, нажмите `ОК`即可.
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash3.webp').default} size="50%" align="center" />
            
            15. После завершения записи компьютер издаст звуковой сигнал, и прогресс-полоса станет `Готов`.
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash4.webp').default} size="40%" align="center" />
            
            16. После завершения записи не торопитесь вынимать карточку.
            17. Откройте проводник, проверьте наличие флешки или мобильного устройства с именем `FlyOS-Conf`.
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash5.webp').default} size="60%" align="center" />
            
            18. Откройте `FlyOS-Conf`. Если в нем присутствуют два указанных ниже файлов, значит запись прошла успешно.
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash6.webp').default} size="70%" align="center" />
            
            19. Из них файл `config.txt` — это файл конфигурации системы. Просмотрите следующую страницу для содержимого. Отредактируйте файл конфигурации.

        </TabItem>
        <TabItem value="M2SD" label="Через M2SD Burner запись на M2WE или TF-карту">
            ## Через M2SD Burner запись на M2WE или TF-карту
            :::danger Важно
                * Этот продукт поддерживает USB 3.0.
                * Этот продукт не поддерживает одновременную установку TF-карты и M2WE.
                * После установки M2WE или SD-карты подключите их к USB-порту компьютера для форматирования.
                * Не устанавливайте NVMe или другие устройства, иначе может произойти повреждение оборудования!!!
            :::
            
            1. Установите M2WE или SD-карту в M2SD. Если используется TF-карта для записи, карта должна быть больше 4 ГБ, рекомендуется использовать карту SanDisk объемом 32 ГБ и выше (C10) (во время тестирования выяснилось, что многие дешевые карты после записи не запускаются)
                - Установка M2WE
                <ImageView image={require('@site/docs/General/fly-os/img/m2sd/m2sd-1.webp').default} size="100%" align="left" />
                - Установка SD-карты
                <ImageView image={require('@site/docs/General/fly-os/img/m2sd/m2sd.webp').default} size="100%" align="left" />

            2. Откройте `Rufus`, выберите устройство. Выбранное устройство должно показывать объем, совпадающий с объемом TF-карты, подключенной к компьютеру.  
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash1.webp').default} size="40%" align="center" />
    
            3. Выберите файл образа, щелкните по кнопке `Выбрать` справа от поля `Тип загрузочного устройства`, чтобы выбрать `.img` файл, распакованный ранее.
            4. После выбора файла образа поле `Тип загрузочного устройства` изменится на название файла образа.
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash2.webp').default} size="40%" align="center" />
            
            5. Нажмите кнопку `Старт`. Если появится окно с предупреждением о необходимости очистки данных диска, нажмите `ОК`即可.
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash3.webp').default} size="50%" align="center" />
            
            6. После завершения записи компьютер издаст звуковой сигнал, и прогресс-полоса станет `Готов`.
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash4.webp').default} size="40%" align="center" />
            
            7. После завершения записи не торопитесь вынимать карточку.
            8. Откройте проводник, проверьте наличие флешки или мобильного устройства с именем `FlyOS-Conf`.
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash5.webp').default} size="60%" align="center" />
            
            9. Откройте `FlyOS-Conf`. Если в нем присутствуют два указанных ниже файлов, значит запись прошла успешно.
            
            <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash6.webp').default} size="70%" align="center" />
            
            10. Из них файл `config.txt` — это файл конфигурации системы. Просмотрите следующую страницу для содержимого. Отредактируйте файл конфигурации.

        </TabItem>
    </Tabs>

## Настройка Wi-Fi

    1. Используйте `vscode` или другой профессиональный текстовый редактор для открытия файла `config.txt` (**лучше не использовать стандартный блокнот Windows для редактирования конфигурационных файлов**)
    <ImageView image={require('@site/docs/DebugDoc/flyos-fast/img/flash6.webp').default} size="70%" align="center" />

    2. В поле `WIFI_SSID=""` введите ваше **имя Wi-Fi**  
       В поле `WIFI_PASS="""` введите ваш **пароль Wi-Fi**  
       Сохраните изменения и закройте файл, затем удалите флешку или мобильное устройство с именем `FlyOS-Conf`.

    <ImageView image={require('@site/docs/ProductDoc/SBC/fly-pi-v2/img/osfast_wifi.webp').default} size="70%" align="center" />  

## Запуск верхнего уровня

    1. Перед запуском убедитесь, что **карта памяти** или **M2WE** правильно установлена в верхний уровень.
    <ImageView image={require('@site/docs/ProductDoc/SBC/fly-pi-v2/img/tf.webp').default} size="70%" align="center" />
    <ImageView image={require('@site/docs/ProductDoc/SBC/fly-pi-v2/img/m2we.webp').default} size="70%" align="center" />
  
    2. Установите антенну для модуля `M2WE` или `2.4G Wi-Fi`.
    :::warning
    * Для работы верхнего уровня FLY необходим модуль `M2WE` или `2.4G Wi-Fi`, иначе Wi-Fi не будет работать.
    * Обратите внимание, что верхний уровень не поддерживает Wi-Fi с именем на русском языке, также не поддерживает комбинированные 2.4G и 5G Wi-Fi.
    * Красная стрелка указывает на разъем антенны Wi-Fi.
    * Разъем Wi-Fi — это `ipex1`.
    * Установите антенну на PI V2, иначе возможны проблемы с сигналом, из-за чего подключение к маршрутизатору может быть невозможным.
    <ImageView image={require('@site/docs/ProductDoc/SBC/fly-pi-v2/img/wifi.webp').default} size="80%" align="left" /> 

    3. Подключите питание к верхнему уровню.  
    **Ваш верхний уровень уже запущен!**  
    Продолжите выполнение следующего шага: <Button variant="contained" disableElevation href="/docs/ProductDoc/SBC/fly-pi-v2/ssh">SSH соединение с верхним уровнем</Button>


## Другие настройки системы

Другие настройки системы см. по ссылке: <Button variant="contained" disableElevation href="/docs/DebugDoc/flyos-fast/config">Настройка системы</Button>
