---
sidebar_position: 3
sidebar_label: CAN Firmware Burning
---

import CANFLASH from '@site/i18n/en/docusaurus-plugin-content-docs/current/General/dfu-flash/_host-can-flash.mdx';
import MakeOperate from "i18n/en/docusaurus-plugin-content-docs/current/General/klipper-make/_make-operate.mdx";
import CAN from '@site/i18n/en/docusaurus-plugin-content-docs/current/General/dfu-flash/_firmware/723/_can.mdx';
import SSH from '@site/i18n/en/docusaurus-plugin-content-docs/current/General/dfu-flash/_firmware/_ssh.mdx';

import LS from '@site/i18n/en/docusaurus-plugin-content-docs/current/General/dfu-flash/_can.mdx';

# CAN Firmware Compilation

## Start Compilation

    <SSH />

    <MakeOperate/>

    <CAN />

    * Select GPIO pins to set at micro-controller startup, input: !PA15 Please note that! is uppercase
        <ImageView image={require('@site/docs/ProductDoc/ToolBoard/fly-mmu/mmu/flash/img/can.webp').default} size="100%" align="center" />
    * Press `Q` key, **Save configuration** will appear, then press `Y` key
        <ImageView image={require('@site/docs/General/dfu-flash/img/configuration.webp').default} size="50%" align="center" />
    * Now the configuration should be saved and you should exit to the command line interface
    * Input `make -j4` to start compilation, it takes some time
        <ImageView image={require('@site/docs/General/dfu-flash/img/make.webp').default} size="50%" align="center" />
    * If the following content is output, the compilation is successful

        ```bash
        Linking out/klipper.elf
        Creating hex file out/klipper.bin
        ```

## Search for Device

    <LS />

## Burn Firmware

    * Before burning the firmware, use the XT30 data cable to connect the tool board to the UTOC or the motherboard that has been flashed with the bridge firmware, the reference wiring diagram is below
    * Please note whether the DIP switch is set to the corresponding position
        <ImageView image={require('@site/docs/ProductDoc/ToolBoard/fly-mmu/mmu/flash/img/can_mode.webp').default} size="90%" align="center" />
    * Connection reference for UTOC
        <ImageView image={require('@site/docs/General/get-id/img/utoc.webp').default} size="80%" align="left" />
    * Please ensure that CAN H and CAN L measure about `60立` with a multimeter when powered off, if it is `120立` then a `120立` jumper needs to be connected, if it is about `40立` the jumper needs to be removed
        <ImageView image={require('@site/docs/ProductDoc/ToolBoard/fly-mmu/mmu/flash/img/120.webp').default} size="50%" align="center" />

    <CANFLASH />

## Confirm Whether the Firmware Starts

    * If the firmware starts normally, the LED will light up
        <ImageView image={require('@site/docs/ProductDoc/ToolBoard/fly-mmu/mmu/flash/img/led.webp').default} size="100%" align="center" />
